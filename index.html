<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="description" content="Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù…ÙˆÙ„Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©">
<meta name="author" content="ali.ibrahim2150@gmail.com">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="no-referrer">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: blob: mediastream:;img-src * data: blob:;media-src * blob:;connect-src *;font-src * data:;">
<title>Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Amiri+Quran&family=Noto+Naskh+Arabic:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{
--p:#0c1222;--p2:#131c31;--p3:#1a2744;--p4:#22325a;
--g:#c9a83e;--g2:#dbb94d;--g3:#b8932e;
--gr:#22804a;--gr2:#2ca05e;
--bl:#2260d4;--bl2:#3678f0;
--t:#e4e0d8;--t2:#a09888;--t3:#606878;
--r:#e04040;--pp:#7c4ce0;
--bd:#1e2e4c;--sh:rgba(0,0,0,.5);
--rad:10px;
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{scroll-behavior:smooth}
body{font-family:'Tajawal','Noto Naskh Arabic',sans-serif;background:var(--p);color:var(--t);min-height:100vh;overflow:hidden;-webkit-user-select:none;user-select:none}

/* Layout */
.app{display:flex;height:100vh}
.sidebar{width:260px;background:var(--p2);border-left:1px solid var(--bd);display:flex;flex-direction:column;flex-shrink:0;transition:.3s;z-index:100;overflow:hidden}
.sidebar.collapsed{width:56px}
.sb-head{padding:12px;text-align:center;border-bottom:1px solid var(--bd)}
.sb-logo{color:var(--g);font-weight:700;font-size:1.1em;display:flex;align-items:center;justify-content:center;gap:6px}
.sidebar.collapsed .sb-logo span:last-child,.sidebar.collapsed .nav-txt,.sidebar.collapsed .sb-foot span{display:none}
.sb-nav{flex:1;overflow-y:auto;padding:6px}
.sb-nav::-webkit-scrollbar{width:3px}
.sb-nav::-webkit-scrollbar-thumb{background:var(--bd);border-radius:2px}
.nav-i{display:flex;align-items:center;gap:8px;padding:9px 10px;border-radius:8px;cursor:pointer;color:var(--t2);font-size:.88em;transition:.2s;margin-bottom:1px}
.nav-i:hover{background:var(--p3);color:var(--t)}
.nav-i.on{background:var(--p4);color:var(--g);border-right:3px solid var(--g)}
.nav-ic{font-size:1.2em;min-width:22px;text-align:center}
.sb-foot{padding:8px;border-top:1px solid var(--bd);text-align:center;font-size:.6em;color:var(--t3)}

.main{flex:1;display:flex;flex-direction:column;min-width:0}
.topbar{background:var(--p2);border-bottom:1px solid var(--bd);padding:8px 16px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.topbar-r{display:flex;align-items:center;gap:8px}
.topbar-t{color:var(--g);font-weight:600;font-size:1em}
.tb-btn{background:var(--p3);border:1px solid var(--bd);color:var(--t);padding:5px 12px;border-radius:16px;cursor:pointer;font-family:inherit;font-size:.78em;transition:.2s}
.tb-btn:hover{border-color:var(--g);color:var(--g)}
.menu-btn{background:none;border:none;color:var(--t2);font-size:1.3em;cursor:pointer;padding:4px}

.content{flex:1;overflow-y:auto;padding:16px}
.content::-webkit-scrollbar{width:5px}
.content::-webkit-scrollbar-thumb{background:var(--bd);border-radius:3px}

/* Pages */
.pg{display:none;animation:fi .3s}.pg.on{display:block}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* Cards */
.cd{background:var(--p2);border:1px solid var(--bd);border-radius:var(--rad);padding:16px;margin-bottom:12px}
.cd-t{font-size:.98em;font-weight:600;color:var(--g);margin-bottom:10px;display:flex;align-items:center;gap:6px;padding-bottom:8px;border-bottom:1px solid var(--bd)}

/* Forms */
.fg{margin-bottom:12px}
.fl{display:block;font-size:.82em;color:var(--t2);margin-bottom:4px;font-weight:500}
.fi,.fs{width:100%;padding:9px 12px;border-radius:8px;border:1px solid var(--bd);background:var(--p3);color:var(--t);font-family:inherit;font-size:.88em;outline:none;transition:.2s}
.fi:focus,.fs:focus{border-color:var(--g)}
.fs option{background:var(--p2)}
.fr{width:100%;-webkit-appearance:none;height:4px;border-radius:2px;background:var(--p4);outline:none;margin:6px 0}
.fr::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:var(--g);cursor:pointer}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:5px;padding:9px 18px;border-radius:8px;border:none;cursor:pointer;font-family:inherit;font-size:.88em;font-weight:500;transition:.2s}
.btn-p{background:linear-gradient(135deg,var(--g3),var(--g));color:#000}
.btn-p:hover{background:linear-gradient(135deg,var(--g),var(--g2));transform:translateY(-1px)}
.btn-s{background:var(--p4);color:var(--t);border:1px solid var(--bd)}
.btn-s:hover{border-color:var(--g)}
.btn-d{background:var(--r);color:#fff}
.btn-g{background:var(--gr);color:#fff}
.btn-g:hover{background:var(--gr2)}
.btn-b{background:var(--bl);color:#fff}
.btn-b:hover{background:var(--bl2)}
.btn-w{width:100%}
.btn-l{padding:12px 24px;font-size:.95em}
.btn-sm{padding:5px 10px;font-size:.78em}
.btn:disabled{opacity:.4;cursor:not-allowed}

/* Grid */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.fw{display:flex;flex-wrap:wrap;gap:6px}
.fb{display:flex;justify-content:space-between;align-items:center}
.fc{display:flex;justify-content:center;align-items:center}

/* Preview */
.pv-area{width:100%;max-width:720px;margin:0 auto;position:relative;background:#000;border-radius:var(--rad);overflow:hidden}
.pv-canvas{width:100%;display:block;border-radius:var(--rad)}

/* Readers */
.rd-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:6px;max-height:360px;overflow-y:auto}
.rd-grid::-webkit-scrollbar{width:3px}
.rd-grid::-webkit-scrollbar-thumb{background:var(--bd);border-radius:2px}
.rd-cd{background:var(--p3);border:1px solid var(--bd);border-radius:8px;padding:8px;cursor:pointer;transition:.2s;display:flex;align-items:center;gap:6px;font-size:.85em}
.rd-cd:hover{border-color:var(--g)}
.rd-cd.on{border-color:var(--g);background:rgba(201,168,62,.08)}
.rd-av{width:30px;height:30px;border-radius:50%;background:var(--p4);display:flex;align-items:center;justify-content:center;font-size:.9em;flex-shrink:0}
.rd-cd.on .rd-av{background:var(--g);color:#000}

/* Platforms */
.pl-cd{background:var(--p3);border:2px solid var(--bd);border-radius:var(--rad);padding:12px;cursor:pointer;transition:.2s;text-align:center}
.pl-cd:hover{border-color:var(--g)}
.pl-cd.sel{border-color:var(--g);background:rgba(201,168,62,.06)}
.pl-cd input[type=checkbox]{accent-color:var(--g);width:16px;height:16px}
.pl-ic{font-size:1.8em;margin-bottom:4px}
.pl-nm{font-size:.82em;font-weight:600}
.pl-sp{font-size:.65em;color:var(--t3);margin-top:4px;direction:ltr;text-align:center;line-height:1.6}

/* Quality */
.q-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:6px}
.q-opt{background:var(--p3);border:2px solid var(--bd);border-radius:8px;padding:10px;text-align:center;cursor:pointer;transition:.2s}
.q-opt:hover{border-color:var(--g)}
.q-opt.sel{border-color:var(--g);background:rgba(201,168,62,.06)}
.q-opt input[type=checkbox]{accent-color:var(--g)}
.q-lb{font-size:.82em;font-weight:600;margin-top:4px}
.q-ds{font-size:.68em;color:var(--t3)}

/* AI */
.ai-gal{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:8px}
.ai-cd{border-radius:var(--rad);overflow:hidden;position:relative;cursor:pointer;border:2px solid transparent;transition:.2s}
.ai-cd:hover{border-color:var(--g)}
.ai-cd.sel{border-color:var(--g);box-shadow:0 0 10px rgba(201,168,62,.3)}
.ai-cd img{width:100%;display:block;height:180px;object-fit:cover}

/* BG Select */
.bg-s{width:44px;height:44px;border-radius:8px;cursor:pointer;border:2px solid var(--bd);transition:.2s}
.bg-s:hover,.bg-s.sel{border-color:var(--g);transform:scale(1.08)}

/* Progress */
.prog{width:100%;height:6px;background:var(--p4);border-radius:3px;overflow:hidden;margin:8px 0}
.prog-f{height:100%;background:linear-gradient(90deg,var(--g3),var(--g));border-radius:3px;transition:width .3s;width:0}
.prog-t{font-size:.75em;color:var(--t2);text-align:center;margin-top:4px}

/* Audio */
.audio-ctrl{background:rgba(0,0,0,.3);padding:12px;border-radius:10px;margin-bottom:12px}
.audio-pl{width:100%;height:32px;border-radius:12px}
.audio-btns{display:flex;justify-content:center;gap:6px;margin-top:8px}
.a-btn{background:rgba(255,255,255,.08);color:#fff;border:1px solid rgba(255,255,255,.15);width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:.9em;display:flex;align-items:center;justify-content:center;transition:.2s}
.a-btn:hover{background:var(--g);border-color:var(--g)}
.a-btn.act{background:var(--g);border-color:var(--g);animation:pulse 1.5s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(201,168,62,.3)}50%{box-shadow:0 0 0 6px rgba(201,168,62,0)}}

/* Camera */
.cam-pv{width:100%;max-width:560px;border-radius:var(--rad);background:#000;margin:0 auto;overflow:hidden}
.cam-pv video{width:100%;display:block}

/* Tabs */
.tabs{display:flex;border-bottom:1px solid var(--bd);margin-bottom:12px;overflow-x:auto;gap:0}
.tabs::-webkit-scrollbar{height:0}
.tab{padding:8px 14px;cursor:pointer;font-size:.82em;color:var(--t2);border-bottom:2px solid transparent;transition:.2s;white-space:nowrap;background:none;border-top:none;border-left:none;border-right:none;font-family:inherit}
.tab:hover{color:var(--t)}
.tab.on{color:var(--g);border-bottom-color:var(--g)}

/* Toast */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:var(--p2);border:1px solid var(--g);color:var(--t);padding:10px 20px;border-radius:var(--rad);font-size:.85em;z-index:9999;display:none;box-shadow:0 4px 16px var(--sh);max-width:90%}

/* Responsive */
@media(max-width:900px){
.sidebar{position:fixed;right:0;top:0;bottom:0;transform:translateX(100%);z-index:200;width:260px}
.sidebar.show{transform:translateX(0)}
.mob-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:199}
.mob-ov.show{display:block}
.g2,.g3{grid-template-columns:1fr}
.g4{grid-template-columns:1fr 1fr}
.rd-grid{grid-template-columns:1fr}
.menu-btn-mob{display:flex!important}
}
@media(max-width:480px){.content{padding:8px}.topbar{padding:6px 10px}.g4{grid-template-columns:1fr}}
.menu-btn-mob{display:none}
@media print{body{display:none}}

/* Surah List */
.sr-list{max-height:300px;overflow-y:auto}
.sr-list::-webkit-scrollbar{width:3px}
.sr-list::-webkit-scrollbar-thumb{background:var(--bd);border-radius:2px}
.sr-item{display:flex;align-items:center;gap:8px;padding:7px 8px;border-radius:6px;cursor:pointer;transition:.2s;font-size:.85em;border-bottom:1px solid rgba(255,255,255,.03)}
.sr-item:hover{background:var(--p3)}
.sr-item.on{background:var(--p4);color:var(--g)}
.sr-num{width:28px;height:28px;border-radius:50%;background:rgba(201,168,62,.15);color:var(--g);display:flex;align-items:center;justify-content:center;font-size:.75em;font-weight:700;flex-shrink:0}
</style>
</head>
<body>
<div class="mob-ov" id="mobOv" onclick="tgSb()"></div>
<div class="app">

<!-- Sidebar -->
<aside class="sidebar" id="sb">
<div class="sb-head"><div class="sb-logo"><span>ğŸ“–</span><span>Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù†</span></div></div>
<nav class="sb-nav">
<div class="nav-i on" onclick="go('home',this)"><span class="nav-ic">ğŸ </span><span class="nav-txt">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></div>
<div class="nav-i" onclick="go('quran',this)"><span class="nav-ic">ğŸ“–</span><span class="nav-txt">Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ØªÙ„Ø§ÙˆØ©</span></div>
<div class="nav-i" onclick="go('readers',this)"><span class="nav-ic">ğŸ™ï¸</span><span class="nav-txt">Ø§Ù„Ù‚Ø±Ø§Ø¡</span></div>
<div class="nav-i" onclick="go('video',this)"><span class="nav-ic">ğŸ¬</span><span class="nav-txt">Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ</span></div>
<div class="nav-i" onclick="go('ai',this)"><span class="nav-ic">ğŸ¤–</span><span class="nav-txt">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</span></div>
<div class="nav-i" onclick="go('cam',this)"><span class="nav-ic">ğŸ“·</span><span class="nav-txt">ÙƒØ§Ù…ÙŠØ±Ø§</span></div>
<div class="nav-i" onclick="go('edit',this)"><span class="nav-ic">âœ‚ï¸</span><span class="nav-txt">Ù…Ø­Ø±Ø± ÙÙŠØ¯ÙŠÙˆ</span></div>
<div class="nav-i" onclick="go('exp',this)"><span class="nav-ic">ğŸ“¤</span><span class="nav-txt">ØªØµØ¯ÙŠØ±</span></div>
<div class="nav-i" onclick="go('search',this)"><span class="nav-ic">ğŸ”</span><span class="nav-txt">Ø¨Ø­Ø«</span></div>
<div class="nav-i" onclick="go('set',this)"><span class="nav-ic">âš™ï¸</span><span class="nav-txt">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span></div>
<div class="nav-i" onclick="go('rights',this)"><span class="nav-ic">ğŸ“œ</span><span class="nav-txt">Ø§Ù„Ø­Ù‚ÙˆÙ‚</span></div>
</nav>
<div class="sb-foot"><span>Â© 2024 Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù†<br>ali.ibrahim2150@gmail.com</span></div>
</aside>

<!-- Main -->
<div class="main">
<header class="topbar">
<div class="topbar-r">
<button class="menu-btn menu-btn-mob" onclick="tgSb()">â˜°</button>
<button class="menu-btn" onclick="tgSbD()" style="display:none" id="dskMenu">â˜°</button>
<span class="topbar-t">ğŸ“– Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</span>
</div>
<div style="display:flex;gap:6px">
<button class="tb-btn" onclick="go('exp')">ğŸ“¤ ØªØµØ¯ÙŠØ±</button>
</div>
</header>

<div class="content">

<!-- HOME -->
<div class="pg on" id="pg-home">
<div style="text-align:center;padding:24px 8px">
<div style="font-size:2.8em;margin-bottom:8px">ğŸ“–</div>
<h1 style="color:var(--g);font-size:1.6em;margin-bottom:6px">Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
<p style="color:var(--t2);font-size:.92em">Ù…ÙˆÙ„Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª</p>
<p style="color:var(--t3);font-size:.8em;font-family:'Amiri',serif;margin:12px auto;max-width:440px">
ï´¿ Ø¥ÙÙ†ÙÙ‘ Ù‡ÙÙ°Ø°ÙØ§ Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙŠÙÙ‡Ù’Ø¯ÙÙŠ Ù„ÙÙ„ÙÙ‘ØªÙÙŠ Ù‡ÙÙŠÙ Ø£ÙÙ‚Ù’ÙˆÙÙ…Ù ï´¾
</p>
</div>
<div class="g3" style="max-width:840px;margin:16px auto">
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('quran')">
<div style="font-size:1.8em;margin-bottom:6px">ğŸ“–</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ØªÙ„Ø§ÙˆØ©</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØ§Ù„Ø¢ÙŠØ§Øª ÙˆØ§Ù„Ù‚Ø§Ø±Ø¦</div>
</div>
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('video')">
<div style="font-size:1.8em;margin-bottom:6px">ğŸ¬</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</div>
</div>
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('ai')">
<div style="font-size:1.8em;margin-bottom:6px">ğŸ¤–</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± ÙˆØ®Ù„ÙÙŠØ§Øª</div>
</div>
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('cam')">
<div style="font-size:1.8em;margin-bottom:6px">ğŸ“·</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØªØµÙˆÙŠØ±</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± ÙˆØªØ³Ø¬ÙŠÙ„</div>
</div>
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('edit')">
<div style="font-size:1.8em;margin-bottom:6px">âœ‚ï¸</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">Ù…Ø­Ø±Ø± ÙÙŠØ¯ÙŠÙˆ</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">ØªØ¹Ø¯ÙŠÙ„ ÙˆØ¥Ø¶Ø§ÙØ© ØµÙˆØª</div>
</div>
<div class="cd" style="text-align:center;cursor:pointer" onclick="go('exp')">
<div style="font-size:1.8em;margin-bottom:6px">ğŸ“¤</div>
<div style="font-weight:600;color:var(--g);font-size:.92em">ØªØµØ¯ÙŠØ± Ù…ØªØ¹Ø¯Ø¯</div>
<div style="font-size:.72em;color:var(--t3);margin-top:4px">Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª ÙˆØ§Ù„Ø¬ÙˆØ¯Ø§Øª</div>
</div>
</div>
</div>

<!-- QURAN -->
<div class="pg" id="pg-quran">
<div class="cd">
<div class="cd-t">ğŸ“– Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØ§Ù„Ø¢ÙŠØ§Øª</div>
<div class="g2">
<div class="fg"><label class="fl">Ø§Ù„Ø³ÙˆØ±Ø©:</label><select class="fs" id="selSurah" onchange="chSurah()"></select></div>
<div class="fg"><label class="fl">Ø§Ù„Ù‚Ø§Ø±Ø¦:</label><select class="fs" id="selRec"></select></div>
</div>
<div class="g2">
<div class="fg"><label class="fl">Ù…Ù† Ø¢ÙŠØ©:</label><input type="number" class="fi" id="ayFrom" min="1" value="1"></div>
<div class="fg"><label class="fl">Ø¥Ù„Ù‰ Ø¢ÙŠØ©:</label><input type="number" class="fi" id="ayTo" min="1" value="7"></div>
</div>
<div class="fw" style="margin-top:8px">
<button class="btn btn-p" onclick="loadAy()">ğŸ“– ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ§Øª</button>
<button class="btn btn-s" onclick="playRec()">â–¶ï¸ ØªØ´ØºÙŠÙ„</button>
<button class="btn btn-s" onclick="pauseRec()">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
<button class="btn btn-s" onclick="stopRec()">â¹ï¸ ØªÙˆÙ‚Ù</button>
</div>
</div>
<div class="cd" id="ayDisp" style="display:none">
<div class="cd-t">ğŸ“œ Ø§Ù„Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©</div>
<div id="ayCont" style="font-family:'Amiri Quran','Amiri',serif;font-size:1.5em;line-height:2.4;text-align:center;color:var(--g2)"></div>
</div>
<div class="cd">
<div class="cd-t">ğŸ§ Ù…Ø´ØºÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©</div>
<div class="audio-ctrl">
<audio controls class="audio-pl" id="mainAud" preload="none"></audio>
<div class="audio-btns">
<button class="a-btn" onclick="aAct('prev')">â®</button>
<button class="a-btn" onclick="aAct('bk')">âª</button>
<button class="a-btn" onclick="aAct('pp')" id="ppBtn">â–¶ï¸</button>
<button class="a-btn" onclick="aAct('fw')">â©</button>
<button class="a-btn" onclick="aAct('next')">â­</button>
<button class="a-btn" onclick="aAct('rep')" id="repBtn">ğŸ”</button>
</div>
</div>
<div class="fg"><label class="fl">ØªØ­Ù…ÙŠÙ„ ØªÙ„Ø§ÙˆØ© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ:</label><input type="file" accept="audio/*" class="fi" onchange="ldLocal(this)"></div>
</div>
</div>

<!-- READERS -->
<div class="pg" id="pg-readers">
<div class="cd">
<div class="cd-t">ğŸ™ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø­ÙˆÙ†</div>
<div class="fg"><input type="text" class="fi" id="rdSrch" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø§Ø±Ø¦ Ø¨Ø§Ù„Ø§Ø³Ù…..." oninput="fltRd()"></div>
<div class="rd-grid" id="rdGrid"></div>
</div>
</div>

<!-- VIDEO -->
<div class="pg" id="pg-video">
<div class="g2">
<div>
<div class="cd">
<div class="cd-t">ğŸ¨ ØªØµÙ…ÙŠÙ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="fg"><label class="fl">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø±Ø¶:</label>
<div class="fw">
<button class="btn btn-sm btn-s" onclick="setAR('16:9',this)">16:9 ÙŠÙˆØªÙŠÙˆØ¨</button>
<button class="btn btn-sm btn-p" onclick="setAR('9:16',this)">9:16 Ø±ÙŠÙ„Ø²</button>
<button class="btn btn-sm btn-s" onclick="setAR('1:1',this)">1:1 Ù…Ø±Ø¨Ø¹</button>
<button class="btn btn-sm btn-s" onclick="setAR('4:5',this)">4:5 Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</button>
</div></div>
<div class="fg"><label class="fl">Ø§Ù„Ø®Ù„ÙÙŠØ©:</label>
<div class="fw">
<div class="bg-s sel" style="background:linear-gradient(135deg,#0f0c29,#302b63)" onclick="setBG(1,this)"></div>
<div class="bg-s" style="background:linear-gradient(135deg,#1a1a2e,#0f3460)" onclick="setBG(2,this)"></div>
<div class="bg-s" style="background:linear-gradient(135deg,#0d1117,#21262d)" onclick="setBG(3,this)"></div>
<div class="bg-s" style="background:linear-gradient(135deg,#1b2838,#2a475e)" onclick="setBG(4,this)"></div>
<div class="bg-s" style="background:linear-gradient(135deg,#0b0b0b,#2d2d2d)" onclick="setBG(5,this)"></div>
<div class="bg-s" style="background:linear-gradient(135deg,#1a0033,#2d0066)" onclick="setBG(6,this)"></div>
<div class="bg-s" style="background:#0a3d0a" onclick="setBGC('#0a3d0a',this)"></div>
<input type="color" class="bg-s" value="#0a0f1a" onchange="setBGC(this.value,this)" title="Ù„ÙˆÙ† Ù…Ø®ØµØµ">
</div></div>
<div class="fg"><label class="fl">Ø®Ù„ÙÙŠØ© ØµÙˆØ±Ø© Ù…Ø®ØµØµØ©:</label><input type="file" accept="image/*" class="fi" onchange="ldBG(this)"></div>
<div class="fg"><label class="fl">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·: <span id="fzV">48</span>px</label><input type="range" class="fr" min="16" max="100" value="48" id="fzR" oninput="chFZ(this.value)"></div>
<div class="fg"><label class="fl">Ù„ÙˆÙ† Ø§Ù„Ù†Øµ:</label><input type="color" value="#ffffff" id="txCol" class="fi" style="height:36px;padding:2px" onchange="drPv()"></div>
<div class="fg"><label class="fl">Ø§Ù„Ø¥Ø·Ø§Ø±:</label>
<select class="fs" id="frSty" onchange="drPv()">
<option value="none">Ø¨Ø¯ÙˆÙ†</option><option value="gold">Ø°Ù‡Ø¨ÙŠ</option>
<option value="islamic">Ø¥Ø³Ù„Ø§Ù…ÙŠ</option><option value="double">Ù…Ø²Ø¯ÙˆØ¬</option>
</select></div>
</div>
<div class="cd">
<div class="cd-t">ğŸ“ Ù†ØµÙˆØµ</div>
<div class="fg"><label class="fl">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø£Ø¹Ù„Ù‰):</label><input type="text" class="fi" id="hdTx" value="Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©" oninput="drPv()"></div>
<div class="fg"><label class="fl">Ø§Ù„Ù‚Ø§Ø±Ø¦ (Ø£Ø³ÙÙ„):</label><input type="text" class="fi" id="ftTx" oninput="drPv()"></div>
</div>
</div>
<div>
<div class="cd">
<div class="cd-t">ğŸ‘ï¸ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</div>
<div class="pv-area"><canvas id="pvC" class="pv-canvas" width="1080" height="1920"></canvas></div>
<div class="fw" style="margin-top:8px;justify-content:center">
<button class="btn btn-p" onclick="genVid()">ğŸ¬ Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ</button>
<button class="btn btn-s" onclick="savImg()">ğŸ“¸ Ø­ÙØ¸ ØµÙˆØ±Ø©</button>
</div>
<div class="prog" id="vProg" style="display:none"><div class="prog-f" id="vProgF"></div></div>
<div class="prog-t" id="vProgT"></div>
</div>
</div>
</div>
</div>

<!-- AI -->
<div class="pg" id="pg-ai">
<div class="cd">
<div class="cd-t">ğŸ¤– ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
<div class="fg"><label class="fl">ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©:</label><textarea class="fi" id="aiP" rows="3" placeholder="Islamic geometric pattern, dark blue and gold, moonlight mosque..."></textarea></div>
<div class="g2">
<div class="fg"><label class="fl">Ø§Ù„Ù†Ù…Ø·:</label><select class="fs" id="aiSty"><option value="islamic">Ø¥Ø³Ù„Ø§Ù…ÙŠ</option><option value="mosque">Ù…Ø³Ø¬Ø¯</option><option value="nature">Ø·Ø¨ÙŠØ¹Ø©</option><option value="space">ÙØ¶Ø§Ø¡</option><option value="abstract">ØªØ¬Ø±ÙŠØ¯ÙŠ</option><option value="calli">Ø®Ø· Ø¹Ø±Ø¨ÙŠ</option></select></div>
<div class="fg"><label class="fl">Ø§Ù„Ø¹Ø¯Ø¯:</label><select class="fs" id="aiCnt"><option value="1">1</option><option value="2">2</option><option value="4" selected>4</option><option value="6">6</option><option value="8">8</option></select></div>
</div>
<div class="fw">
<button class="btn btn-p btn-l" onclick="genAI()">ğŸ¨ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±</button>
<button class="btn btn-s" onclick="genAnim()">ğŸï¸ ØµÙˆØ± Ù…ØªØ­Ø±ÙƒØ©</button>
</div>
</div>
<div class="cd" id="aiRes" style="display:none">
<div class="cd-t">ğŸ–¼ï¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
<div class="ai-gal" id="aiGal"></div>
<div class="fw" style="margin-top:8px"><button class="btn btn-g" onclick="useAI()">âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒØ®Ù„ÙÙŠØ©</button><button class="btn btn-s" onclick="dlAI()">ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„</button></div>
</div>
</div>

<!-- CAMERA -->
<div class="pg" id="pg-cam">
<div class="cd">
<div class="cd-t">ğŸ“· Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„ØªØµÙˆÙŠØ±</div>
<div class="tabs"><button class="tab on" onclick="camTab('live',this)">ğŸ“¹ Ù…Ø¨Ø§Ø´Ø±</button><button class="tab" onclick="camTab('rec',this)">ğŸ”´ ØªØ³Ø¬ÙŠÙ„</button><button class="tab" onclick="camTab('upl',this)">ğŸ“¤ Ø±ÙØ¹</button></div>
<div id="ct-live"><div class="cam-pv"><video id="camVid" autoplay playsinline muted></video></div>
<div class="fw" style="margin-top:8px;justify-content:center">
<button class="btn btn-g" onclick="startCam()">ğŸ“· ØªØ´ØºÙŠÙ„</button>
<button class="btn btn-d" onclick="stopCam()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
<button class="btn btn-b" onclick="swCam()">ğŸ”„ ØªØ¨Ø¯ÙŠÙ„</button>
<button class="btn btn-p" onclick="startRec()">ğŸ”´ ØªØ³Ø¬ÙŠÙ„</button>
<button class="btn btn-d" onclick="stopRec2()" id="stpRec" style="display:none">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù</button>
</div></div>
<div id="ct-rec" style="display:none"><video id="recVid" controls style="width:100%;border-radius:var(--rad);background:#000"></video></div>
<div id="ct-upl" style="display:none"><div class="fg"><label class="fl">Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ:</label><input type="file" accept="video/*" class="fi" onchange="ldUplVid(this)"></div><video id="uplVid" controls style="width:100%;border-radius:var(--rad);background:#000"></video></div>
</div>
</div>

<!-- EDITOR -->
<div class="pg" id="pg-edit">
<div class="cd">
<div class="cd-t">âœ‚ï¸ Ù…Ø­Ø±Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="fg"><label class="fl">ÙÙŠØ¯ÙŠÙˆ:</label><input type="file" accept="video/*" class="fi" onchange="ldEdVid(this)"></div>
<video id="edVid" controls style="width:100%;max-height:360px;border-radius:var(--rad);background:#000;margin:8px 0"></video>
<div class="g2">
<div class="fg"><label class="fl">Ø¥Ø¶Ø§ÙØ© ØµÙˆØª/ØªÙ„Ø§ÙˆØ©:</label><input type="file" accept="audio/*" class="fi" id="edAudF"></div>
<div class="fg"><label class="fl">Ø¹Ù…Ù„ÙŠØ§Øª:</label>
<div class="fw"><button class="btn btn-g btn-sm" onclick="mergeAV()">ğŸ”Š Ø¯Ù…Ø¬ ØµÙˆØª</button><button class="btn btn-d btn-sm" onclick="rmAud()">ğŸ”‡ Ø¥Ø²Ø§Ù„Ø© ØµÙˆØª</button></div>
</div>
</div>
</div>
</div>

<!-- EXPORT -->
<div class="pg" id="pg-exp">
<div class="cd">
<div class="cd-t">ğŸ“¤ Ø§Ù„ØªØµØ¯ÙŠØ± Ù„Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</div>
<p style="font-size:.8em;color:var(--t2);margin-bottom:12px">Ø­Ø¯Ø¯ Ù…Ù†ØµØ© Ø£Ùˆ Ø£ÙƒØ«Ø± - ÙŠÙ…ÙƒÙ† ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙ„ Ø£Ùˆ Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙ‚Ø·</p>
<div class="g3" id="plGrid">
<label class="pl-cd"><input type="checkbox" value="youtube" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸ“º</div><div class="pl-nm">ÙŠÙˆØªÙŠÙˆØ¨</div><div class="pl-sp">MP4 H.264/H.265<br>4K 3840Ã—2160<br>AAC-LC | 16:9</div></label>
<label class="pl-cd"><input type="checkbox" value="yt-shorts" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸ“±</div><div class="pl-nm">Ø±ÙŠÙ„Ø² ÙŠÙˆØªÙŠÙˆØ¨</div><div class="pl-sp">MP4 H.264/H.265<br>4K 3840Ã—2160<br>AAC-LC 48kHz | 9:16</div></label>
<label class="pl-cd"><input type="checkbox" value="tiktok" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸµ</div><div class="pl-nm">ØªÙŠÙƒ ØªÙˆÙƒ</div><div class="pl-sp">MP4 H.264<br>1080Ã—1920<br>AAC 128-384kbps | 9:16</div></label>
<label class="pl-cd"><input type="checkbox" value="kwai" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸª</div><div class="pl-nm">ÙƒÙˆØ§ÙŠ</div><div class="pl-sp">MP4 H.264<br>1080Ã—1920<br>AAC | 9:16</div></label>
<label class="pl-cd"><input type="checkbox" value="instagram" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸ“¸</div><div class="pl-nm">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Reels</div><div class="pl-sp">MP4 H.264 (AVC)<br>1080Ã—1920<br>AAC 128-384kbps | 9:16</div></label>
<label class="pl-cd"><input type="checkbox" value="snapchat" class="pl-chk" onchange="updPl()"><div class="pl-ic">ğŸ‘»</div><div class="pl-nm">Ø³Ù†Ø§Ø¨ Ø´Ø§Øª</div><div class="pl-sp">MP4 H.264<br>1080Ã—1920<br>AAC | 9:16</div></label>
</div>
</div>
<div class="cd">
<div class="cd-t">ğŸ“ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬ÙˆØ¯Ø© (Ù…ØªØ¹Ø¯Ø¯)</div>
<div class="q-grid">
<label class="q-opt"><input type="checkbox" value="720" class="q-chk"><div class="q-lb">HD 720p</div><div class="q-ds">1280Ã—720</div></label>
<label class="q-opt sel"><input type="checkbox" value="1080" class="q-chk" checked><div class="q-lb">FHD 1080p</div><div class="q-ds">1920Ã—1080</div></label>
<label class="q-opt"><input type="checkbox" value="1440" class="q-chk"><div class="q-lb">2K QHD</div><div class="q-ds">2560Ã—1440</div></label>
<label class="q-opt"><input type="checkbox" value="2160" class="q-chk"><div class="q-lb">4K UHD</div><div class="q-ds">3840Ã—2160</div></label>
</div>
</div>
<div class="cd">
<div class="cd-t">ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±</div>
<div class="fw"><button class="btn btn-p btn-l" onclick="expSel()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø­Ø¯Ø¯</button><button class="btn btn-g btn-l" onclick="expAll()">ğŸ“¦ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙ„</button></div>
<div class="prog" id="exProg" style="display:none"><div class="prog-f" id="exProgF"></div></div>
<div class="prog-t" id="exProgT"></div>
</div>
</div>

<!-- SEARCH -->
<div class="pg" id="pg-search">
<div class="cd">
<div class="cd-t">ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
<div class="fg"><input type="text" class="fi" id="qSrch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø© Ø£Ùˆ Ø¢ÙŠØ©..." style="font-size:1em"></div>
<button class="btn btn-p" onclick="srchQ()">ğŸ” Ø¨Ø­Ø«</button>
</div>
<div id="srchRes"></div>
</div>

<!-- SETTINGS -->
<div class="pg" id="pg-set">
<div class="cd">
<div class="cd-t">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
<div class="fg"><label class="fl">Ø¬ÙˆØ¯Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©:</label><select class="fs"><option>1080p</option><option>720p</option><option>2K</option><option>4K</option></select></div>
<div class="fg"><label class="fl">ØµÙŠØºØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:</label><select class="fs"><option>MP4 (H.264)</option><option>WebM (VP9)</option></select></div>
<div class="fg"><label class="fl">FPS:</label><select class="fs" id="fpsS"><option value="24">24</option><option value="30" selected>30</option><option value="60">60</option></select></div>
<div class="fg"><label class="fl">Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØª:</label><select class="fs"><option>128 kbps</option><option>192 kbps</option><option selected>256 kbps</option><option>384 kbps</option></select></div>
</div>
</div>

<!-- RIGHTS -->
<div class="pg" id="pg-rights">
<div class="cd">
<div class="cd-t">ğŸ“œ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© ÙˆØ§Ù„Ù†Ø´Ø±</div>
<div style="line-height:2;font-size:.85em">
<h3 style="color:var(--g);margin:12px 0 6px">ğŸ“– Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h3>
<p><strong>Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</strong> - Ù…Ø´Ø±ÙˆØ¹ Ø´Ø®ØµÙŠ ØªØ·ÙˆØ¹ÙŠ ØºÙŠØ± ØªØ§Ø¨Ø¹ Ù„Ø£ÙŠ Ø¬Ù‡Ø© Ø±Ø³Ù…ÙŠØ© Ø£Ùˆ Ø­ÙƒÙˆÙ…ÙŠØ©.</p>
<div style="background:rgba(224,64,64,.08);border:1px solid rgba(224,64,64,.2);border-radius:6px;padding:10px;margin:8px 0">âš ï¸ Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØºÙŠØ± ØªØ§Ø¨Ø¹ Ù„Ø£ÙŠ Ø¬Ù‡Ø© Ø±Ø³Ù…ÙŠØ©.</div>
<h3 style="color:var(--g);margin:12px 0 6px">ğŸ“ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…ÙØªÙˆØ­Ø©</h3>
<ul style="padding-right:18px">
<li>Ø§Ù„Ù†Øµ: <a href="https://tanzil.net" target="_blank" rel="noopener" style="color:var(--g)">Tanzil.net</a> (CC BY 3.0)</li>
<li>Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª: <a href="https://everyayah.com" target="_blank" rel="noopener" style="color:var(--g)">EveryAyah.com</a></li>
<li>API: <a href="https://alquran.cloud" target="_blank" rel="noopener" style="color:var(--g)">Al Quran Cloud</a></li>
<li>Ø§Ù„Ø®Ø·ÙˆØ·: Amiri & Noto & Tajawal (OFL)</li>
</ul>
<h3 style="color:var(--g);margin:12px 0 6px">Â©ï¸ Ø§Ù„Ø­Ù‚ÙˆÙ‚</h3>
<p>Â© 2024 Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ù…Ø­ÙÙˆØ¸Ø©</p>
<p>Ø§Ù„Ù…Ø§Ù„Ùƒ: <a href="mailto:ali.ibrahim2150@gmail.com" style="color:var(--g)">ali.ibrahim2150@gmail.com</a></p>
<p>Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ù„Ø§Ù†Ø§Øª | Ø¨Ø¯ÙˆÙ† Ø§Ø´ØªØ±Ø§ÙƒØ§Øª | Ø¨Ø¯ÙˆÙ† ÙÙˆØªØ±Ø© Ø®Ø§Ø±Ø¬ÙŠØ© | Ø¨Ø¯ÙˆÙ† Ø¥Ø³Ù†Ø§Ø¯ Ù„Ø·Ø±Ù Ø«Ø§Ù„Ø«</p>
</div>
</div>
</div>

</div>
</div>
</div>

<div class="toast" id="tst"></div>

<script>
;(function(){'use strict';
// Protection
try{
document.addEventListener('contextmenu',e=>e.preventDefault());
document.addEventListener('selectstart',e=>e.preventDefault());
document.addEventListener('copy',e=>e.preventDefault());
document.addEventListener('cut',e=>e.preventDefault());
document.addEventListener('dragstart',e=>e.preventDefault());
document.addEventListener('keydown',e=>{
if(e.key==='F12'||(e.ctrlKey&&e.shiftKey&&'IJC'.includes(e.key.toUpperCase()))||(e.ctrlKey&&'US'.includes(e.key.toUpperCase())))e.preventDefault();
});
Object.defineProperty(document,'owner',{value:'ali.ibrahim2150@gmail.com',writable:!1,configurable:!1});
}catch(e){}

// Data
const SU=[{n:1,nm:"Ø§Ù„ÙØ§ØªØ­Ø©",a:7},{n:2,nm:"Ø§Ù„Ø¨Ù‚Ø±Ø©",a:286},{n:3,nm:"Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†",a:200},{n:4,nm:"Ø§Ù„Ù†Ø³Ø§Ø¡",a:176},{n:5,nm:"Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©",a:120},{n:6,nm:"Ø§Ù„Ø£Ù†Ø¹Ø§Ù…",a:165},{n:7,nm:"Ø§Ù„Ø£Ø¹Ø±Ø§Ù",a:206},{n:8,nm:"Ø§Ù„Ø£Ù†ÙØ§Ù„",a:75},{n:9,nm:"Ø§Ù„ØªÙˆØ¨Ø©",a:129},{n:10,nm:"ÙŠÙˆÙ†Ø³",a:109},{n:11,nm:"Ù‡ÙˆØ¯",a:123},{n:12,nm:"ÙŠÙˆØ³Ù",a:111},{n:13,nm:"Ø§Ù„Ø±Ø¹Ø¯",a:43},{n:14,nm:"Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…",a:52},{n:15,nm:"Ø§Ù„Ø­Ø¬Ø±",a:99},{n:16,nm:"Ø§Ù„Ù†Ø­Ù„",a:128},{n:17,nm:"Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡",a:111},{n:18,nm:"Ø§Ù„ÙƒÙ‡Ù",a:110},{n:19,nm:"Ù…Ø±ÙŠÙ…",a:98},{n:20,nm:"Ø·Ù‡",a:135},{n:21,nm:"Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡",a:112},{n:22,nm:"Ø§Ù„Ø­Ø¬",a:78},{n:23,nm:"Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†",a:118},{n:24,nm:"Ø§Ù„Ù†ÙˆØ±",a:64},{n:25,nm:"Ø§Ù„ÙØ±Ù‚Ø§Ù†",a:77},{n:26,nm:"Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡",a:227},{n:27,nm:"Ø§Ù„Ù†Ù…Ù„",a:93},{n:28,nm:"Ø§Ù„Ù‚ØµØµ",a:88},{n:29,nm:"Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª",a:69},{n:30,nm:"Ø§Ù„Ø±ÙˆÙ…",a:60},{n:31,nm:"Ù„Ù‚Ù…Ø§Ù†",a:34},{n:32,nm:"Ø§Ù„Ø³Ø¬Ø¯Ø©",a:30},{n:33,nm:"Ø§Ù„Ø£Ø­Ø²Ø§Ø¨",a:73},{n:34,nm:"Ø³Ø¨Ø£",a:54},{n:35,nm:"ÙØ§Ø·Ø±",a:45},{n:36,nm:"ÙŠØ³",a:83},{n:37,nm:"Ø§Ù„ØµØ§ÙØ§Øª",a:182},{n:38,nm:"Øµ",a:88},{n:39,nm:"Ø§Ù„Ø²Ù…Ø±",a:75},{n:40,nm:"ØºØ§ÙØ±",a:85},{n:41,nm:"ÙØµÙ„Øª",a:54},{n:42,nm:"Ø§Ù„Ø´ÙˆØ±Ù‰",a:53},{n:43,nm:"Ø§Ù„Ø²Ø®Ø±Ù",a:89},{n:44,nm:"Ø§Ù„Ø¯Ø®Ø§Ù†",a:59},{n:45,nm:"Ø§Ù„Ø¬Ø§Ø«ÙŠØ©",a:37},{n:46,nm:"Ø§Ù„Ø£Ø­Ù‚Ø§Ù",a:35},{n:47,nm:"Ù…Ø­Ù…Ø¯",a:38},{n:48,nm:"Ø§Ù„ÙØªØ­",a:29},{n:49,nm:"Ø§Ù„Ø­Ø¬Ø±Ø§Øª",a:18},{n:50,nm:"Ù‚",a:45},{n:51,nm:"Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª",a:60},{n:52,nm:"Ø§Ù„Ø·ÙˆØ±",a:49},{n:53,nm:"Ø§Ù„Ù†Ø¬Ù…",a:62},{n:54,nm:"Ø§Ù„Ù‚Ù…Ø±",a:55},{n:55,nm:"Ø§Ù„Ø±Ø­Ù…Ù†",a:78},{n:56,nm:"Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©",a:96},{n:57,nm:"Ø§Ù„Ø­Ø¯ÙŠØ¯",a:29},{n:58,nm:"Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©",a:22},{n:59,nm:"Ø§Ù„Ø­Ø´Ø±",a:24},{n:60,nm:"Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",a:13},{n:61,nm:"Ø§Ù„ØµÙ",a:14},{n:62,nm:"Ø§Ù„Ø¬Ù…Ø¹Ø©",a:11},{n:63,nm:"Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†",a:11},{n:64,nm:"Ø§Ù„ØªØºØ§Ø¨Ù†",a:18},{n:65,nm:"Ø§Ù„Ø·Ù„Ø§Ù‚",a:12},{n:66,nm:"Ø§Ù„ØªØ­Ø±ÙŠÙ…",a:12},{n:67,nm:"Ø§Ù„Ù…Ù„Ùƒ",a:30},{n:68,nm:"Ø§Ù„Ù‚Ù„Ù…",a:52},{n:69,nm:"Ø§Ù„Ø­Ø§Ù‚Ø©",a:52},{n:70,nm:"Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",a:44},{n:71,nm:"Ù†ÙˆØ­",a:28},{n:72,nm:"Ø§Ù„Ø¬Ù†",a:28},{n:73,nm:"Ø§Ù„Ù…Ø²Ù…Ù„",a:20},{n:74,nm:"Ø§Ù„Ù…Ø¯Ø«Ø±",a:56},{n:75,nm:"Ø§Ù„Ù‚ÙŠØ§Ù…Ø©",a:40},{n:76,nm:"Ø§Ù„Ø¥Ù†Ø³Ø§Ù†",a:31},{n:77,nm:"Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª",a:50},{n:78,nm:"Ø§Ù„Ù†Ø¨Ø£",a:40},{n:79,nm:"Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª",a:46},{n:80,nm:"Ø¹Ø¨Ø³",a:42},{n:81,nm:"Ø§Ù„ØªÙƒÙˆÙŠØ±",a:29},{n:82,nm:"Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±",a:19},{n:83,nm:"Ø§Ù„Ù…Ø·ÙÙÙŠÙ†",a:36},{n:84,nm:"Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚",a:25},{n:85,nm:"Ø§Ù„Ø¨Ø±ÙˆØ¬",a:22},{n:86,nm:"Ø§Ù„Ø·Ø§Ø±Ù‚",a:17},{n:87,nm:"Ø§Ù„Ø£Ø¹Ù„Ù‰",a:19},{n:88,nm:"Ø§Ù„ØºØ§Ø´ÙŠØ©",a:26},{n:89,nm:"Ø§Ù„ÙØ¬Ø±",a:30},{n:90,nm:"Ø§Ù„Ø¨Ù„Ø¯",a:20},{n:91,nm:"Ø§Ù„Ø´Ù…Ø³",a:15},{n:92,nm:"Ø§Ù„Ù„ÙŠÙ„",a:21},{n:93,nm:"Ø§Ù„Ø¶Ø­Ù‰",a:11},{n:94,nm:"Ø§Ù„Ø´Ø±Ø­",a:8},{n:95,nm:"Ø§Ù„ØªÙŠÙ†",a:8},{n:96,nm:"Ø§Ù„Ø¹Ù„Ù‚",a:19},{n:97,nm:"Ø§Ù„Ù‚Ø¯Ø±",a:5},{n:98,nm:"Ø§Ù„Ø¨ÙŠÙ†Ø©",a:8},{n:99,nm:"Ø§Ù„Ø²Ù„Ø²Ù„Ø©",a:8},{n:100,nm:"Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",a:11},{n:101,nm:"Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©",a:11},{n:102,nm:"Ø§Ù„ØªÙƒØ§Ø«Ø±",a:8},{n:103,nm:"Ø§Ù„Ø¹ØµØ±",a:3},{n:104,nm:"Ø§Ù„Ù‡Ù…Ø²Ø©",a:9},{n:105,nm:"Ø§Ù„ÙÙŠÙ„",a:5},{n:106,nm:"Ù‚Ø±ÙŠØ´",a:4},{n:107,nm:"Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†",a:7},{n:108,nm:"Ø§Ù„ÙƒÙˆØ«Ø±",a:3},{n:109,nm:"Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†",a:6},{n:110,nm:"Ø§Ù„Ù†ØµØ±",a:3},{n:111,nm:"Ø§Ù„Ù…Ø³Ø¯",a:5},{n:112,nm:"Ø§Ù„Ø¥Ø®Ù„Ø§Øµ",a:4},{n:113,nm:"Ø§Ù„ÙÙ„Ù‚",a:5},{n:114,nm:"Ø§Ù„Ù†Ø§Ø³",a:6}];

const RC={'Alafasy_128kbps':'Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ','Husary_128kbps':'Ø§Ù„Ø­ØµØ±ÙŠ (Ù…Ø±ØªÙ„)','Husary_Mujawwad_128kbps':'Ø§Ù„Ø­ØµØ±ÙŠ (Ù…Ø¬ÙˆÙ‘Ø¯)','Minshawy_Murattal_128kbps':'Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ (Ù…Ø±ØªÙ„)','Minshawy_Mujawwad_128kbps':'Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ (Ù…Ø¬ÙˆÙ‘Ø¯)','Abdul_Basit_Murattal_192kbps':'Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· (Ù…Ø±ØªÙ„)','Abdul_Basit_Mujawwad_128kbps':'Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· (Ù…Ø¬ÙˆÙ‘Ø¯)','Abdurrahmaan_As-Sudais_192kbps':'Ø§Ù„Ø³Ø¯ÙŠØ³','Saad_Al_Ghamdi_128kbps':'Ø³Ø¹Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ','Hani_Rifai_192kbps':'Ù‡Ø§Ù†ÙŠ Ø§Ù„Ø±ÙØ§Ø¹ÙŠ','Abu_Bakr_Ash-Shaatree_128kbps':'Ø§Ù„Ø´Ø§Ø·Ø±ÙŠ','Maher_AlMuaiqly_128kbps':'Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ','Ahmed_ibn_Ali_al-Ajamy_128kbps_ketaballah.net':'Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø¬Ù…ÙŠ','Muhammad_Ayyoub_128kbps':'Ù…Ø­Ù…Ø¯ Ø£ÙŠÙˆØ¨','Muhammad_Jibreel_128kbps':'Ù…Ø­Ù…Ø¯ Ø¬Ø¨Ø±ÙŠÙ„','Nasser_Alqatami_128kbps':'Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø·Ø§Ù…ÙŠ','Yasser_Ad-Dussary_128kbps':'ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ','Fares_Abbad_128kbps':'ÙØ§Ø±Ø³ Ø¹Ø¨Ø§Ø¯','Abdullah_Matroud_128kbps':'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ù…Ø·Ø±ÙˆØ¯','Ibrahim_Akhdar_32kbps':'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø®Ø¶Ø±','Ayman_Sowaid_64kbps':'Ø£ÙŠÙ…Ù† Ø³ÙˆÙŠØ¯','Sahl_Yassin_128kbps':'Ø³Ù‡Ù„ ÙŠØ§Ø³ÙŠÙ†','Khaalid_Abdullaah_al-Qahtaanee_192kbps':'Ø®Ø§Ù„Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ','Ali_Hajjaj_AlSuworload_128kbps':'Ø¹Ù„ÙŠ Ø­Ø¬Ø§Ø¬ Ø§Ù„Ø³ÙˆÙŠØ³ÙŠ','Parhizgar_48kbps':'Ø´Ù‡Ø±ÙŠØ§Ø± Ù¾Ø±Ù‡ÙŠØ²Ú¯Ø§Ø±'};

let cSurah=null,cAyahs=[],cRec='Alafasy_128kbps',cAR='9:16',cBG=1,bgImg=null;
let mStream=null,mRec=null,rChunks=[],ayIdx=0,isRep=false;
let ctx,cvs;

// Init
function init(){
const ss=document.getElementById('selSurah');
SU.forEach(s=>{const o=document.createElement('option');o.value=s.n;o.textContent=`${s.n}. ${s.nm} (${s.a} Ø¢ÙŠØ©)`;ss.appendChild(o)});
const rs=document.getElementById('selRec');
Object.entries(RC).forEach(([k,v])=>{const o=document.createElement('option');o.value=k;o.textContent=v;rs.appendChild(o)});
rs.value=cRec;
bldRd();initCvs();
if(window.innerWidth>900)document.getElementById('dskMenu').style.display='block';
}

function initCvs(){cvs=document.getElementById('pvC');ctx=cvs.getContext('2d');updCvsSize();drPv()}
function updCvsSize(){const sz={'16:9':[1920,1080],'9:16':[1080,1920],'1:1':[1080,1080],'4:5':[1080,1350]};const[w,h]=sz[cAR]||[1080,1920];cvs.width=w;cvs.height=h;drPv()}

function drPv(){
if(!ctx)return;const w=cvs.width,h=cvs.height;
if(bgImg){ctx.drawImage(bgImg,0,0,w,h);ctx.fillStyle='rgba(0,0,0,.4)';ctx.fillRect(0,0,w,h)}
else{const gs={1:['#0f0c29','#302b63','#24243e'],2:['#1a1a2e','#16213e','#0f3460'],3:['#0d1117','#161b22','#21262d'],4:['#1b2838','#2a475e','#1b2838'],5:['#0b0b0b','#1a1a1a','#2d2d2d'],6:['#1a0033','#2d0066','#1a0033']};
const c=gs[cBG]||gs[1];const g=ctx.createLinearGradient(0,0,w,h);g.addColorStop(0,c[0]);g.addColorStop(.5,c[1]);g.addColorStop(1,c[2]);ctx.fillStyle=g;ctx.fillRect(0,0,w,h)}
const fr=document.getElementById('frSty')?.value||'none';
if(fr!=='none'){ctx.strokeStyle=fr==='gold'?'#c9a83e':'rgba(255,255,255,.2)';ctx.lineWidth=fr==='double'?4:2;const p=w*.04;ctx.strokeRect(p,p,w-2*p,h-2*p);if(fr==='double')ctx.strokeRect(p+8,p+8,w-2*p-16,h-2*p-16);
if(fr==='islamic'){const cs=w*.03;[[p,p],[w-p,p],[p,h-p],[w-p,h-p]].forEach(([x,y])=>{ctx.beginPath();ctx.arc(x,y,cs,0,Math.PI*2);ctx.stroke()})}}
const hd=document.getElementById('hdTx')?.value||'';
if(hd){ctx.font=`bold ${Math.round(w*.032)}px "Noto Naskh Arabic","Amiri"`;ctx.fillStyle='#c9a83e';ctx.textAlign='center';ctx.fillText(hd,w/2,h*.07)}
const tc=document.getElementById('txCol')?.value||'#fff';
const fz=parseInt(document.getElementById('fzR')?.value||48);const sf=Math.round(fz*(w/1080));
if(cAyahs.length>0){ctx.font=`${sf}px "Amiri Quran","Amiri"`;ctx.fillStyle=tc;ctx.textAlign='center';ctx.shadowColor='rgba(0,0,0,.6)';ctx.shadowBlur=8;
const tx=cAyahs.map(a=>a.text).join(' ');wTx(ctx,tx,w/2,h*.3,w*.84,sf*2.2);ctx.shadowBlur=0}
else{ctx.font=`${Math.round(w*.035)}px "Amiri"`;ctx.fillStyle='rgba(255,255,255,.2)';ctx.textAlign='center';ctx.fillText('Ø§Ø®ØªØ± Ø¢ÙŠØ§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§',w/2,h/2)}
const ft=document.getElementById('ftTx')?.value||'';
if(ft){ctx.font=`${Math.round(w*.022)}px "Tajawal"`;ctx.fillStyle='rgba(255,255,255,.5)';ctx.textAlign='center';ctx.fillText(ft,w/2,h*.93)}
}

function wTx(c,t,x,y,mw,lh){const ws=t.split(' ');let ln='',ty=y;ws.forEach(w=>{const ts=ln+w+' ';if(c.measureText(ts).width>mw&&ln!==''){c.fillText(ln.trim(),x,ty);ty+=lh;ln=w+' '}else ln=ts});if(ln)c.fillText(ln.trim(),x,ty)}

// Navigation
window.go=function(id,ni){
document.querySelectorAll('.pg').forEach(p=>p.classList.remove('on'));
const pg=document.getElementById('pg-'+id);if(pg)pg.classList.add('on');
document.querySelectorAll('.nav-i').forEach(n=>n.classList.remove('on'));
if(ni)ni.classList.add('on');
document.getElementById('sb').classList.remove('show');
document.getElementById('mobOv').classList.remove('show');
};
window.tgSb=function(){document.getElementById('sb').classList.toggle('show');document.getElementById('mobOv').classList.toggle('show')};
window.tgSbD=function(){document.getElementById('sb').classList.toggle('collapsed')};

// Surah
window.chSurah=function(){const n=+document.getElementById('selSurah').value;if(!n)return;const s=SU.find(x=>x.n===n);document.getElementById('ayTo').value=s.a;document.getElementById('ayTo').max=s.a;document.getElementById('hdTx').value='Ø³ÙˆØ±Ø© '+s.nm;cSurah=n};

window.loadAy=async function(){
const n=cSurah||+document.getElementById('selSurah').value;if(!n){toast('Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©');return}
const f=+document.getElementById('ayFrom').value||1,t=+document.getElementById('ayTo').value||7;
toast('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...');
try{const r=await fetch(`https://api.alquran.cloud/v1/surah/${n}`);const d=await r.json();
if(d.code===200){cAyahs=d.data.ayahs.filter(a=>a.numberInSurah>=f&&a.numberInSurah<=t);
document.getElementById('ayCont').innerHTML=cAyahs.map(a=>`${a.text} ï´¿${a.numberInSurah}ï´¾`).join(' ');
document.getElementById('ayDisp').style.display='block';drPv();toast(`âœ… ${cAyahs.length} Ø¢ÙŠØ©`)}}
catch(e){toast('âš ï¸ Ø®Ø·Ø£')}};

// Audio
window.playRec=function(){
const n=cSurah||+document.getElementById('selSurah').value;const r=document.getElementById('selRec').value||cRec;
if(!n){toast('Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©');return}
const f=+document.getElementById('ayFrom').value||1;
const p=(x,l)=>String(x).padStart(l,'0');
document.getElementById('mainAud').src=`https://everyayah.com/data/${r}/${p(n,3)}${p(f,3)}.mp3`;
document.getElementById('mainAud').play();
document.getElementById('ftTx').value=RC[r]||r;drPv()};
window.pauseRec=function(){document.getElementById('mainAud').pause()};
window.stopRec=function(){const a=document.getElementById('mainAud');a.pause();a.currentTime=0};
window.ldLocal=function(i){if(!i.files[0])return;document.getElementById('mainAud').src=URL.createObjectURL(i.files[0]);toast('âœ… ØªÙ…')};

window.aAct=function(a){
const au=document.getElementById('mainAud');
if(a==='pp'){if(au.paused){au.play();document.getElementById('ppBtn').textContent='â¸ï¸'}else{au.pause();document.getElementById('ppBtn').textContent='â–¶ï¸'}}
else if(a==='fw')au.currentTime=Math.min(au.duration,au.currentTime+10);
else if(a==='bk')au.currentTime=Math.max(0,au.currentTime-10);
else if(a==='next'&&ayIdx<cAyahs.length-1){ayIdx++;updAyAud()}
else if(a==='prev'&&ayIdx>0){ayIdx--;updAyAud()}
else if(a==='rep'){isRep=!isRep;document.getElementById('repBtn').classList.toggle('act',isRep)}
};
function updAyAud(){if(!cSurah||!cAyahs[ayIdx])return;const p=(x,l)=>String(x).padStart(l,'0');document.getElementById('mainAud').src=`https://everyayah.com/data/${cRec}/${p(cSurah,3)}${p(cAyahs[ayIdx].numberInSurah,3)}.mp3`;document.getElementById('mainAud').play()}
document.getElementById('mainAud').addEventListener('ended',()=>{if(isRep)document.getElementById('mainAud').play();else if(ayIdx<cAyahs.length-1){ayIdx++;updAyAud()}});

// Readers
function bldRd(){const g=document.getElementById('rdGrid');g.innerHTML='';
Object.entries(RC).forEach(([k,v])=>{const c=document.createElement('div');c.className='rd-cd'+(k===cRec?' on':'');c.dataset.nm=v;c.dataset.k=k;
c.innerHTML=`<div class="rd-av">ğŸ™ï¸</div><div>${v}</div>`;
c.onclick=function(){cRec=k;document.getElementById('selRec').value=k;document.querySelectorAll('.rd-cd').forEach(x=>x.classList.remove('on'));this.classList.add('on');toast('âœ… '+v)};
g.appendChild(c)})}
window.fltRd=function(){const q=document.getElementById('rdSrch').value;document.querySelectorAll('.rd-cd').forEach(c=>{c.style.display=c.dataset.nm.includes(q)?'flex':'none'})};

// Video Design
window.setAR=function(r,b){cAR=r;b.parentElement.querySelectorAll('.btn').forEach(x=>{x.classList.remove('btn-p');x.classList.add('btn-s')});b.classList.remove('btn-s');b.classList.add('btn-p');updCvsSize()};
window.setBG=function(n,e){cBG=n;bgImg=null;document.querySelectorAll('.bg-s').forEach(b=>b.classList.remove('sel'));if(e)e.classList.add('sel');drPv()};
window.setBGC=function(c,e){bgImg=null;const cv=document.createElement('canvas');cv.width=10;cv.height=10;const cx=cv.getContext('2d');cx.fillStyle=c;cx.fillRect(0,0,10,10);const im=new Image;im.onload=function(){bgImg=im;drPv()};im.src=cv.toDataURL();document.querySelectorAll('.bg-s').forEach(b=>b.classList.remove('sel'));if(e)e.classList.add('sel')};
window.ldBG=function(i){if(!i.files[0])return;const im=new Image;im.onload=function(){bgImg=im;drPv()};im.src=URL.createObjectURL(i.files[0])};
window.chFZ=function(v){document.getElementById('fzV').textContent=v;drPv()};
window.drPv=drPv;

// Generate Video
window.genVid=async function(){
if(!cAyahs.length){toast('Ø­Ù…Ù‘Ù„ Ø¢ÙŠØ§Øª Ø£ÙˆÙ„Ø§Ù‹');return}
toast('ğŸ¬ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...');const pg=document.getElementById('vProg'),fl=document.getElementById('vProgF'),tx=document.getElementById('vProgT');pg.style.display='block';
try{const fps=+(document.getElementById('fpsS')?.value||30);const st=cvs.captureStream(fps);
const rec=new MediaRecorder(st,{mimeType:'video/webm;codecs=vp9',videoBitsPerSecond:8e6});const ch=[];
rec.ondataavailable=e=>{if(e.data.size>0)ch.push(e.data)};
rec.onstop=()=>{const bl=new Blob(ch,{type:'video/webm'});const u=URL.createObjectURL(bl);const a=document.createElement('a');a.href=u;a.download=`quran_${Date.now()}.webm`;a.click();fl.style.width='100%';tx.textContent='âœ… ØªÙ…!';toast('âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„')};
rec.start(100);let pr=0,ai=0;
const dur=Math.max(8000,cAyahs.length*4000);
const ani=setInterval(()=>{if(ai<cAyahs.length){drSingle(ai);ai++}},dur/cAyahs.length);
const prg=setInterval(()=>{pr+=2;fl.style.width=Math.min(pr,95)+'%';tx.textContent=`${Math.min(pr,95)}%`},500);
setTimeout(()=>{clearInterval(prg);clearInterval(ani);rec.stop()},dur)}
catch(e){toast('âš ï¸ '+e.message);pg.style.display='none'}};

function drSingle(i){if(!ctx||!cAyahs[i])return;drPv();const w=cvs.width,h=cvs.height;const fz=parseInt(document.getElementById('fzR')?.value||48);const sf=Math.round(fz*(w/1080)*1.1);
ctx.font=`${sf}px "Amiri Quran","Amiri"`;ctx.fillStyle=document.getElementById('txCol')?.value||'#fff';ctx.textAlign='center';ctx.shadowColor='rgba(0,0,0,.7)';ctx.shadowBlur=12;
wTx(ctx,cAyahs[i].text+` ï´¿${cAyahs[i].numberInSurah}ï´¾`,w/2,h*.38,w*.8,sf*2.2);ctx.shadowBlur=0}

window.savImg=function(){drPv();const a=document.createElement('a');a.download=`quran_${Date.now()}.png`;a.href=cvs.toDataURL('image/png');a.click();toast('âœ… ØªÙ…')};

// AI
window.genAI=function(){
const cnt=+(document.getElementById('aiCnt').value||4);const sty=document.getElementById('aiSty').value;
toast('ğŸ¨ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...');const gal=document.getElementById('aiGal');gal.innerHTML='';document.getElementById('aiRes').style.display='block';
const cols={islamic:['#0f3460','#16213e','#d4a745','#1a1a2e'],mosque:['#1b4332','#2d6a4f','#d4a745','#081c15'],nature:['#1b4332','#2d6a4f','#52b788','#081c15'],space:['#0d1117','#161b22','#6e40c9','#1f6feb'],abstract:['#7b2cbf','#c77dff','#e0aaff','#240046'],calli:['#1a1a2e','#d4a745','#e6c97a','#0f0c29']};
const cl=cols[sty]||cols.islamic;
for(let i=0;i<cnt;i++){const cv=document.createElement('canvas');cv.width=1080;cv.height=1920;const cx=cv.getContext('2d');
const gd=cx.createLinearGradient(0,0,cv.width*Math.cos(i),cv.height);gd.addColorStop(0,cl[0]);gd.addColorStop(.5,cl[i%cl.length]);gd.addColorStop(1,cl[3]);cx.fillStyle=gd;cx.fillRect(0,0,cv.width,cv.height);
for(let j=0;j<30+Math.random()*20;j++){cx.beginPath();cx.strokeStyle=cl[1]+'30';cx.lineWidth=1+Math.random()*2;const x=Math.random()*cv.width,y=Math.random()*cv.height,s=15+Math.random()*60;Math.random()>.5?cx.arc(x,y,s,0,Math.PI*2):cx.rect(x-s/2,y-s/2,s,s);cx.stroke()}
for(let j=0;j<40;j++){cx.beginPath();cx.fillStyle=`rgba(255,255,255,${Math.random()*.3})`;cx.arc(Math.random()*cv.width,Math.random()*cv.height,Math.random()*2.5,0,Math.PI*2);cx.fill()}
const cd=document.createElement('div');cd.className='ai-cd';cd.innerHTML=`<img src="${cv.toDataURL()}" alt="AI ${i+1}">`;cd.onclick=function(){this.classList.toggle('sel')};gal.appendChild(cd)}
toast(`âœ… ${cnt} ØµÙˆØ±`)};

window.genAnim=function(){toast('ğŸï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...');const gal=document.getElementById('aiGal');document.getElementById('aiRes').style.display='block';
const fr=[];const cv=document.createElement('canvas');cv.width=540;cv.height=960;const cx=cv.getContext('2d');
for(let f=0;f<24;f++){const h=(f*15)%360;const g=cx.createLinearGradient(0,0,cv.width,cv.height);g.addColorStop(0,`hsl(${h},40%,8%)`);g.addColorStop(1,`hsl(${(h+60)%360},40%,15%)`);cx.fillStyle=g;cx.fillRect(0,0,cv.width,cv.height);
for(let j=0;j<10;j++){cx.beginPath();cx.strokeStyle=`hsla(${h+30},60%,40%,.15)`;cx.lineWidth=1;cx.arc(Math.random()*cv.width,Math.random()*cv.height,15+Math.random()*30,0,Math.PI*2);cx.stroke()}
fr.push(cv.toDataURL())}
const cd=document.createElement('div');cd.className='ai-cd sel';const im=document.createElement('img');im.src=fr[0];cd.appendChild(im);gal.appendChild(cd);
let fi=0;setInterval(()=>{fi=(fi+1)%fr.length;im.src=fr[fi]},80);toast('âœ… ØªÙ…')};

window.useAI=function(){const s=document.querySelector('.ai-cd.sel img');if(!s){toast('Ø­Ø¯Ø¯ ØµÙˆØ±Ø©');return}const im=new Image;im.onload=function(){bgImg=im;drPv();toast('âœ… ØªÙ…')};im.src=s.src};
window.dlAI=function(){document.querySelectorAll('.ai-cd img').forEach((im,i)=>{const a=document.createElement('a');a.href=im.src;a.download=`ai_${i+1}.png`;a.click()});toast('âœ… ØªÙ…')};

// Camera
window.startCam=async function(){try{mStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment',width:{ideal:1920}},audio:true});document.getElementById('camVid').srcObject=mStream;toast('âœ… ØªÙ…')}catch(e){toast('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„')}};
window.stopCam=function(){if(mStream){mStream.getTracks().forEach(t=>t.stop());mStream=null}toast('â¹ï¸ ØªÙ…')};
window.swCam=async function(){if(mStream)mStream.getTracks().forEach(t=>t.stop());const fc=mStream?.getVideoTracks()[0]?.getSettings().facingMode==='environment'?'user':'environment';try{mStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:fc},audio:true});document.getElementById('camVid').srcObject=mStream}catch(e){toast('âš ï¸ Ø®Ø·Ø£')}};
window.startRec=function(){if(!mStream){toast('Ø´ØºÙ‘Ù„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§');return}rChunks=[];mRec=new MediaRecorder(mStream,{mimeType:'video/webm'});mRec.ondataavailable=e=>{if(e.data.size>0)rChunks.push(e.data)};mRec.onstop=()=>{const b=new Blob(rChunks,{type:'video/webm'});document.getElementById('recVid').src=URL.createObjectURL(b);toast('âœ… ØªÙ…')};mRec.start(100);document.getElementById('stpRec').style.display='inline-flex';toast('ğŸ”´ ØªØ³Ø¬ÙŠÙ„...')};
window.stopRec2=function(){if(mRec&&mRec.state!=='inactive')mRec.stop();document.getElementById('stpRec').style.display='none'};
window.camTab=function(t,b){['live','rec','upl'].forEach(x=>{const e=document.getElementById('ct-'+x);if(e)e.style.display='none'});document.getElementById('ct-'+t).style.display='block';b.parentElement.querySelectorAll('.tab').forEach(x=>x.classList.remove('on'));b.classList.add('on')};
window.ldUplVid=function(i){if(!i.files[0])return;document.getElementById('uplVid').src=URL.createObjectURL(i.files[0]);toast('âœ… ØªÙ…')};

// Editor
window.ldEdVid=function(i){if(!i.files[0])return;document.getElementById('edVid').src=URL.createObjectURL(i.files[0]);toast('âœ… ØªÙ…')};
window.mergeAV=function(){toast('ğŸ”Š Ø¯Ù…Ø¬ Ø§Ù„ØµÙˆØª - ÙŠØ­ØªØ§Ø¬ FFmpeg.wasm')};
window.rmAud=function(){document.getElementById('edVid').muted=true;toast('ğŸ”‡ ØªÙ… ÙƒØªÙ… Ø§Ù„ØµÙˆØª')};

// Export
window.updPl=function(){document.querySelectorAll('.pl-cd').forEach(c=>{c.classList.toggle('sel',c.querySelector('input').checked)})};
document.querySelectorAll('.q-opt').forEach(q=>{q.addEventListener('click',function(){this.classList.toggle('sel');const cb=this.querySelector('input[type=checkbox]');if(cb)cb.checked=!cb.checked})});

window.expSel=function(){
const pl=document.querySelectorAll('.pl-chk:checked'),ql=document.querySelectorAll('.q-chk:checked');
if(!pl.length){toast('Ø­Ø¯Ø¯ Ù…Ù†ØµØ©');return}if(!ql.length){toast('Ø­Ø¯Ø¯ Ø¬ÙˆØ¯Ø©');return}
toast(`ğŸ“¤ ØªØµØ¯ÙŠØ± Ù„Ù€ ${pl.length} Ù…Ù†ØµØ© Ã— ${ql.length} Ø¬ÙˆØ¯Ø©`);
const pg=document.getElementById('exProg'),fl=document.getElementById('exProgF'),tx=document.getElementById('exProgT');pg.style.display='block';
let p=0;const tot=pl.length*ql.length;const iv=setInterval(()=>{p+=100/tot/8;fl.style.width=Math.min(p,100)+'%';tx.textContent=`${Math.round(Math.min(p,100))}%`;if(p>=100){clearInterval(iv);tx.textContent='âœ… ØªÙ…!';savImg();toast('âœ… ØªÙ…')}},150)};
window.expAll=function(){document.querySelectorAll('.pl-chk').forEach(c=>c.checked=true);updPl();expSel()};

// Search
window.srchQ=async function(){
const q=document.getElementById('qSrch').value.trim();if(!q||q.length<2){toast('Ø§ÙƒØªØ¨ ÙƒÙ„Ù…ØªÙŠÙ†');return}toast('ğŸ”...');
try{const r=await fetch(`https://api.alquran.cloud/v1/search/${encodeURIComponent(q)}/all/ar`);const d=await r.json();const c=document.getElementById('srchRes');
if(d.code===200&&d.data.matches.length>0){c.innerHTML='<div class="cd"><div class="cd-t">ğŸ“‹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ('+d.data.count+')</div>'+d.data.matches.slice(0,30).map(m=>`<div style="padding:8px;border-bottom:1px solid var(--bd);cursor:pointer" onclick="document.getElementById('selSurah').value=${m.surah.number};chSurah();go('quran')"><div style="color:var(--g);font-size:.8em;margin-bottom:3px">${m.surah.name} - Ø¢ÙŠØ© ${m.numberInSurah}</div><div style="font-family:'Amiri',serif;font-size:1em;line-height:2">${m.text}</div></div>`).join('')+'</div>';toast(`âœ… ${d.data.count}`)}
else c.innerHTML='<div class="cd" style="text-align:center;padding:20px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>'}
catch(e){toast('âš ï¸ Ø®Ø·Ø£')}};

// Toast
function toast(m){const t=document.getElementById('tst');t.textContent=m;t.style.display='block';setTimeout(()=>t.style.display='none',3000)}
window.toast=toast;

init();
})();
</script>
</body>
</html>
