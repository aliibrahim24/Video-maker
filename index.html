<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - ØµØ§Ù†Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©</title>
<meta name="description" content="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - ØµØ§Ù†Ø¹ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ">
<meta name="author" content="ali.ibrahim2150@gmail.com">
<meta name="robots" content="index, follow">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="Referrer-Policy" content="no-referrer">
<meta http-equiv="Permissions-Policy" content="camera=self, microphone=self, geolocation=()">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
(function(){
"use strict";
})();
:root{
--p1:#1B4332;--p2:#2D6A4F;--p3:#40916C;--p4:#52B788;--p5:#74C69D;--p6:#95D5B2;
--g1:#8B6914;--g2:#B8860B;--g3:#DAA520;--g4:#F0C850;--g5:rgba(218,165,32,.1);
--bg:#FEFCF7;--bg2:#FFF9EE;--bg3:#FFF5E1;--bg4:#FFF;
--tx:#1A1A2E;--tx2:#4A4A5A;--tx3:#7A7A8A;--tx4:#AAA;
--bd:#E8DCC8;--bd2:#D4C8B0;
--sh:0 4px 24px rgba(27,67,50,.08);--sh2:0 8px 32px rgba(27,67,50,.12);
--rd:16px;--rd2:10px;--rd3:8px;
--fq:'Amiri Quran','Amiri',serif;--fa:'Amiri',serif;--fu:'Cairo',sans-serif;
--qs:30px;
--hh:60px;
}
[data-t=dark]{
--p1:#95D5B2;--p2:#74C69D;--p3:#52B788;--p4:#40916C;--p5:#2D6A4F;--p6:#1B4332;
--g1:#F0C850;--g2:#DAA520;--g3:#B8860B;--g4:#8B6914;--g5:rgba(240,200,80,.08);
--bg:#0A0F1A;--bg2:#111827;--bg3:#1A2332;--bg4:#1E293B;
--tx:#E8E8F0;--tx2:#B0B0C0;--tx3:#707088;--tx4:#505068;
--bd:#2A3648;--bd2:#354258;
--sh:0 4px 24px rgba(0,0,0,.3);--sh2:0 8px 32px rgba(0,0,0,.4);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%}
body{font-family:var(--fu);background:var(--bg);color:var(--tx);overflow-x:hidden;line-height:1.7;transition:.3s}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--bg2)}
::-webkit-scrollbar-thumb{background:var(--g2);border-radius:3px}
button,select,input,textarea{font-family:var(--fu);outline:none}
a{text-decoration:none;color:inherit}
img,video,canvas{max-width:100%;display:block}

/* â•â•â• HEADER â•â•â• */
.hdr{position:sticky;top:0;z-index:1000;height:var(--hh);background:linear-gradient(135deg,var(--p1),var(--p2));display:flex;align-items:center;justify-content:space-between;padding:0 20px;box-shadow:0 4px 30px rgba(0,0,0,.2)}
.hdr *{color:#fff}
.h-brand{display:flex;align-items:center;gap:12px}
.h-icon{width:40px;height:40px;flex-shrink:0}
.h-icon svg{width:100%;height:100%;fill:var(--g3)}
.h-title{font-size:17px;font-weight:700}
.h-sub{font-size:10px;opacity:.7;margin-top:-2px}
.h-actions{display:flex;gap:6px;align-items:center}
.h-btn{width:38px;height:38px;border-radius:50%;border:none;background:rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;font-size:17px;cursor:pointer;transition:.2s}
.h-btn:hover{background:rgba(255,255,255,.25);transform:scale(1.05)}

/* â•â•â• NAV TABS â•â•â• */
.nav-tabs{display:flex;background:var(--bg3);border-bottom:1px solid var(--bd);overflow-x:auto;-webkit-overflow-scrolling:touch}
.nav-tab{padding:12px 20px;border:none;background:none;font-size:13px;font-weight:600;color:var(--tx3);cursor:pointer;white-space:nowrap;border-bottom:3px solid transparent;transition:.2s;position:relative}
.nav-tab:hover{color:var(--tx);background:var(--g5)}
.nav-tab.act{color:var(--p1);border-bottom-color:var(--g2);background:var(--bg4)}
.nav-tab .badge{position:absolute;top:6px;left:6px;background:var(--g2);color:#fff;font-size:9px;padding:1px 5px;border-radius:8px}

/* â•â•â• SECTIONS â•â•â• */
.section{display:none;min-height:calc(100vh - var(--hh) - 48px);padding:20px;max-width:1400px;margin:0 auto}
.section.act{display:block}

/* â•â•â• CARDS â•â•â• */
.card{background:var(--bg4);border:1px solid var(--bd);border-radius:var(--rd);padding:20px;box-shadow:var(--sh);margin-bottom:16px;transition:.2s}
.card:hover{box-shadow:var(--sh2)}
.card-h{font-size:16px;font-weight:700;color:var(--p1);margin-bottom:12px;display:flex;align-items:center;gap:8px;padding-bottom:10px;border-bottom:1px solid var(--bd)}
.card-h .icon{font-size:20px}

/* â•â•â• FORM ELEMENTS â•â•â• */
.form-group{margin-bottom:14px}
.form-label{display:block;font-size:12px;font-weight:600;color:var(--tx2);margin-bottom:5px}
.form-select,.form-input{width:100%;padding:10px 14px;border:2px solid var(--bd);border-radius:var(--rd3);background:var(--bg2);color:var(--tx);font-size:13px;transition:.2s;-webkit-appearance:none}
.form-select:focus,.form-input:focus{border-color:var(--g2);box-shadow:0 0 0 3px var(--g5)}
.form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
.form-row-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.form-row-4{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}

/* â•â•â• BUTTONS â•â•â• */
.btn{padding:10px 20px;border:none;border-radius:var(--rd3);font-size:13px;font-weight:600;cursor:pointer;transition:.2s;display:inline-flex;align-items:center;gap:6px}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn-primary{background:linear-gradient(135deg,var(--p1),var(--p2));color:#fff;box-shadow:0 4px 15px rgba(27,67,50,.3)}
.btn-primary:hover{box-shadow:0 6px 20px rgba(27,67,50,.4)}
.btn-gold{background:linear-gradient(135deg,var(--g1),var(--g2));color:#fff;box-shadow:0 4px 15px rgba(184,134,11,.3)}
.btn-outline{background:none;border:2px solid var(--bd);color:var(--tx2)}
.btn-outline:hover{border-color:var(--p1);color:var(--p1)}
.btn-danger{background:#DC3545;color:#fff}
.btn-sm{padding:6px 12px;font-size:11px}
.btn-lg{padding:14px 28px;font-size:15px}
.btn-block{width:100%;justify-content:center}
.btn-group{display:flex;gap:8px;flex-wrap:wrap}

/* â•â•â• QURAN READER â•â•â• */
.quran-split{display:grid;grid-template-columns:350px 1fr;gap:0;min-height:calc(100vh - var(--hh) - 48px)}
.quran-sidebar{background:var(--bg3);border-left:1px solid var(--bd);overflow-y:auto;max-height:calc(100vh - var(--hh) - 48px);position:sticky;top:calc(var(--hh) + 48px)}
.quran-main{overflow-y:auto;padding:24px}
.quran-frame{border:2px solid var(--g2);border-radius:var(--rd);padding:4px;background:var(--bg4);max-width:780px;margin:0 auto}
.quran-inner{border:1px solid var(--bd2);border-radius:calc(var(--rd) - 4px);padding:24px 20px}

.surah-header{text-align:center;padding:16px 24px;background:linear-gradient(135deg,var(--p1),var(--p2));border-radius:var(--rd3);margin-bottom:16px;position:relative;overflow:hidden}
.surah-header::before,.surah-header::after{content:'âœ¦';position:absolute;top:50%;transform:translateY(-50%);color:var(--g3);font-size:20px;opacity:.4}
.surah-header::before{right:20px}
.surah-header::after{left:20px}
.surah-name{font-family:var(--fq);font-size:32px;color:#fff}
.surah-meta{font-size:11px;color:rgba(255,255,255,.7);display:flex;justify-content:center;gap:16px;margin-top:4px}

.bismillah{text-align:center;font-family:var(--fq);font-size:26px;color:var(--p1);padding:12px;margin-bottom:14px}

.ayah-container{line-height:3.2;text-align:justify;direction:rtl}
.ayah-text{font-family:var(--fq);font-size:var(--qs);cursor:pointer;transition:.15s;padding:2px 4px;border-radius:4px}
.ayah-text:hover{color:var(--p2)}
.ayah-text.playing{background:var(--g5);color:var(--p1)}
.ayah-num{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;font-size:12px;font-weight:700;color:var(--g2);margin:0 3px;vertical-align:middle;cursor:pointer;position:relative;font-family:var(--fu);transition:.2s}
.ayah-num::before{content:'';position:absolute;width:100%;height:100%;border:2px solid var(--g2);border-radius:50%;transform:rotate(45deg)}
.ayah-num:hover{color:var(--p1)}
.ayah-num:hover::before{border-color:var(--p1)}

/* Sidebar controls */
.sb-ctrl{padding:12px;border-bottom:1px solid var(--bd);background:var(--bg4)}
.sb-ctrl .form-group{margin-bottom:8px}
.sb-tabs{display:flex;border-bottom:1px solid var(--bd)}
.sb-tab{flex:1;padding:8px;border:none;background:none;font-size:11px;font-weight:600;color:var(--tx3);cursor:pointer;border-bottom:2px solid transparent;transition:.2s}
.sb-tab.act{color:var(--p1);border-bottom-color:var(--g2)}
.sb-body{overflow-y:auto;flex:1}
.sb-panel{display:none;padding:10px}
.sb-panel.act{display:block}

.trans-verse{padding:10px;border-bottom:1px solid var(--bd);cursor:pointer;transition:.15s;display:flex;gap:8px}
.trans-verse:hover{background:var(--g5)}
.trans-verse.hl{background:var(--g5);border-right:3px solid var(--g2)}
.trans-num{min-width:26px;height:26px;display:flex;align-items:center;justify-content:center;background:var(--p1);color:#fff;border-radius:50%;font-size:10px;font-weight:700;flex-shrink:0;margin-top:3px}
.trans-text{font-size:13px;color:var(--tx2);line-height:1.8}

/* Surah list */
.surah-item{display:flex;align-items:center;gap:8px;padding:8px 10px;cursor:pointer;transition:.15s;border-bottom:1px solid var(--bd)}
.surah-item:hover{background:var(--g5)}
.surah-item.act{background:var(--p1);color:#fff;border-radius:var(--rd3)}
.s-num{width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;border:1.5px solid var(--g2);border-radius:50%;transform:rotate(45deg);flex-shrink:0;color:var(--g2)}
.s-num span{transform:rotate(-45deg)}
.surah-item.act .s-num{border-color:rgba(255,255,255,.4);color:#fff}
.s-name{font-size:13px;font-weight:600}
.s-info{font-size:10px;color:var(--tx3)}
.surah-item.act .s-info{color:rgba(255,255,255,.6)}

/* Search */
.search-box{position:relative;margin-bottom:8px}
.search-input{width:100%;padding:9px 36px 9px 12px;border:2px solid var(--bd);border-radius:var(--rd3);background:var(--bg2);color:var(--tx);font-size:13px}
.search-input:focus{border-color:var(--g2)}
.search-icon{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:14px;color:var(--tx3)}

/* â•â•â• VIDEO MAKER â•â•â• */
.vm-layout{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.preview-container{position:relative;background:#000;border-radius:var(--rd);overflow:hidden;aspect-ratio:9/16;max-height:70vh;margin:0 auto}
.preview-container.landscape{aspect-ratio:16/9}
.preview-container.square{aspect-ratio:1/1}
.preview-canvas{width:100%;height:100%;object-fit:contain}
.preview-overlay{position:absolute;bottom:0;left:0;right:0;padding:20px;background:linear-gradient(transparent,rgba(0,0,0,.7));color:#fff;text-align:center}
.preview-ayah{font-family:var(--fq);font-size:24px;line-height:2;text-shadow:2px 2px 8px rgba(0,0,0,.8)}
.preview-ref{font-size:12px;opacity:.7;margin-top:6px}

/* Platform specs */
.platform-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px}
.platform-card{padding:12px;border:2px solid var(--bd);border-radius:var(--rd3);text-align:center;cursor:pointer;transition:.2s;background:var(--bg2)}
.platform-card:hover{border-color:var(--g2);background:var(--g5)}
.platform-card.sel{border-color:var(--p1);background:var(--g5);box-shadow:0 0 0 2px var(--p1)}
.platform-card .p-icon{font-size:28px;margin-bottom:4px}
.platform-card .p-name{font-size:12px;font-weight:600}
.platform-card .p-spec{font-size:9px;color:var(--tx3)}

/* Export options */
.export-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}
.export-card{padding:12px;border:2px solid var(--bd);border-radius:var(--rd3);cursor:pointer;transition:.2s;background:var(--bg2)}
.export-card:hover{border-color:var(--g2)}
.export-card.sel{border-color:var(--p1);background:var(--g5)}
.export-card input[type=checkbox]{margin-left:8px;accent-color:var(--p1)}
.export-title{font-size:13px;font-weight:600}
.export-desc{font-size:10px;color:var(--tx3)}

/* â•â•â• AI IMAGE GEN â•â•â• */
.ai-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
.ai-img{border-radius:var(--rd3);overflow:hidden;position:relative;aspect-ratio:1;background:var(--bg3);border:1px solid var(--bd)}
.ai-img img{width:100%;height:100%;object-fit:cover}
.ai-img .ai-dl{position:absolute;bottom:6px;right:6px;background:rgba(0,0,0,.6);color:#fff;border:none;padding:4px 10px;border-radius:4px;font-size:11px;cursor:pointer}

/* â•â•â• VIDEO EDITOR â•â•â• */
.editor-timeline{background:var(--bg3);border:1px solid var(--bd);border-radius:var(--rd3);padding:12px;margin-top:12px}
.timeline-track{height:50px;background:var(--bg4);border-radius:6px;margin-bottom:8px;display:flex;align-items:center;padding:0 12px;border:1px solid var(--bd);gap:8px}
.track-label{font-size:11px;font-weight:600;min-width:60px;color:var(--tx2)}
.track-wave{flex:1;height:30px;background:linear-gradient(90deg,var(--p4),var(--g3),var(--p4));border-radius:4px;opacity:.3}

/* â•â•â• RECITERS GRID â•â•â• */
.reciters-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:10px}
.reciter-card{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid var(--bd);border-radius:var(--rd3);cursor:pointer;transition:.2s;background:var(--bg2)}
.reciter-card:hover{border-color:var(--g2);background:var(--g5)}
.reciter-card.sel{border-color:var(--p1);background:var(--g5)}
.reciter-avatar{width:40px;height:40px;border-radius:50%;background:var(--p1);color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.reciter-name{font-size:13px;font-weight:600}
.reciter-style{font-size:10px;color:var(--tx3)}

/* â•â•â• AUDIO PLAYER BAR â•â•â• */
.player-bar{position:fixed;bottom:0;left:0;right:0;background:var(--bg4);border-top:1px solid var(--bd);padding:10px 20px;display:flex;align-items:center;gap:12px;z-index:900;box-shadow:0 -4px 20px rgba(0,0,0,.06)}
.pl-info{min-width:0;max-width:180px;flex-shrink:0}
.pl-sname{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pl-anum{font-size:10px;color:var(--tx3)}
.pl-controls{display:flex;align-items:center;gap:4px;flex-shrink:0}
.pl-btn{width:36px;height:36px;border-radius:50%;border:none;background:none;color:var(--tx);font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
.pl-btn:hover{background:var(--g5)}
.pl-btn.main-btn{width:42px;height:42px;background:var(--p1);color:#fff;font-size:18px}
.pl-btn.main-btn:hover{background:var(--p2)}
.pl-progress{flex:1;display:flex;align-items:center;gap:6px;min-width:0}
.progress-bar{flex:1;height:5px;background:var(--bd);border-radius:3px;cursor:pointer;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--g2),var(--g3));width:0%;border-radius:3px;transition:width .1s}
.progress-time{font-size:10px;color:var(--tx3);min-width:35px;text-align:center;flex-shrink:0}

/* â•â•â• MODAL â•â•â• */
.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:2000;align-items:center;justify-content:center;padding:20px}
.modal-overlay.show{display:flex}
.modal{background:var(--bg4);border-radius:var(--rd);max-width:600px;width:100%;max-height:80vh;overflow-y:auto;padding:24px;box-shadow:var(--sh2)}
.modal-h{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid var(--bd)}
.modal-title{font-size:18px;font-weight:700;color:var(--p1)}
.modal-close{background:none;border:none;font-size:24px;color:var(--tx3);cursor:pointer}

/* â•â•â• LOADING â•â•â• */
.loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}
.spinner{width:40px;height:40px;border:3px solid var(--bd);border-top-color:var(--g2);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading span{margin-top:12px;font-size:12px;color:var(--tx3)}

/* â•â•â• TOAST â•â•â• */
.toast{position:fixed;top:80px;left:50%;transform:translateX(-50%);background:var(--p1);color:#fff;padding:10px 24px;border-radius:var(--rd3);font-size:13px;z-index:3000;box-shadow:var(--sh2);opacity:0;transition:.3s;pointer-events:none}
.toast.show{opacity:1}

/* â•â•â• FOOTER â•â•â• */
.app-footer{background:linear-gradient(135deg,var(--p1),#0a2920);color:rgba(255,255,255,.8);text-align:center;padding:24px 16px;font-size:11px;line-height:2.2}
.app-footer hr{border:none;height:1px;background:rgba(255,255,255,.1);margin:10px auto;max-width:120px}
.app-footer a{color:var(--g3)}
.app-footer strong{color:#fff}

/* â•â•â• PROGRESS BAR (Export) â•â•â• */
.export-progress{margin-top:12px;display:none}
.export-progress.show{display:block}
.ep-bar{height:8px;background:var(--bd);border-radius:4px;overflow:hidden}
.ep-fill{height:100%;background:linear-gradient(90deg,var(--p1),var(--g2));width:0%;border-radius:4px;transition:width .3s}
.ep-text{font-size:11px;color:var(--tx3);text-align:center;margin-top:6px}

/* â•â•â• RESPONSIVE â•â•â• */
@media(max-width:1024px){
.quran-split{grid-template-columns:1fr}
.quran-sidebar{max-height:none;position:static;border-left:none;border-bottom:1px solid var(--bd)}
.vm-layout{grid-template-columns:1fr}
}
@media(max-width:768px){
.nav-tab{padding:10px 14px;font-size:12px}
.section{padding:12px}
.form-row-3,.form-row-4{grid-template-columns:1fr 1fr}
.player-bar{flex-wrap:wrap;padding:8px 12px;gap:6px}
.pl-progress{order:-1;width:100%;flex-basis:100%}
.pl-info{max-width:120px}
:root{--qs:22px}
.surah-name{font-size:24px}
.preview-ayah{font-size:18px}
}
@media(max-width:480px){
.form-row-3,.form-row-4,.form-row{grid-template-columns:1fr}
.platform-grid{grid-template-columns:repeat(3,1fr)}
:root{--qs:20px}
.nav-tab{padding:8px 10px;font-size:11px}
}
</style>
</head>
<body>

<!-- â•â•â• HEADER â•â•â• -->
<header class="hdr">
<div class="h-brand">
<div class="h-icon">
<svg viewBox="0 0 100 100"><path d="M50 8C50 8 26 3 6 17L6 83C26 73 50 77 50 77C50 77 74 73 94 83L94 17C74 3 50 8 50 8Z" opacity=".9"/><line x1="50" y1="12" x2="50" y2="77" stroke="#fff" stroke-width="1.5"/><circle cx="50" cy="30" r="6" fill="none" stroke="#fff" stroke-width="1"/><circle cx="50" cy="30" r="2" fill="#fff"/></svg>
</div>
<div>
<div class="h-title">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
<div class="h-sub">Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</div>
</div>
</div>
<div class="h-actions">
<button class="h-btn" onclick="toggleTheme()" title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">ğŸŒ™</button>
</div>
</header>

<!-- â•â•â• NAV TABS â•â•â• -->
<nav class="nav-tabs" id="navTabs">
<button class="nav-tab act" onclick="switchSection('quran',this)">ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</button>
<button class="nav-tab" onclick="switchSection('video',this)">ğŸ¬ ØµØ§Ù†Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
<button class="nav-tab" onclick="switchSection('ai',this)">ğŸ¨ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± AI</button>
<button class="nav-tab" onclick="switchSection('editor',this)">âœ‚ï¸ Ù…Ø­Ø±Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
<button class="nav-tab" onclick="switchSection('live',this)">ğŸ“¡ Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</button>
<button class="nav-tab" onclick="switchSection('export',this)">ğŸ“¤ Ø§Ù„ØªØµØ¯ÙŠØ±</button>
<button class="nav-tab" onclick="switchSection('reciters',this)">ğŸ™ï¸ Ø§Ù„Ù‚Ø±Ø§Ø¡</button>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 1: QURAN READER -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section act" id="sec-quran">
<div class="quran-split">
<!-- Sidebar -->
<aside class="quran-sidebar" id="qSidebar">
<div class="sb-ctrl">
<div class="form-group">
<label class="form-label">ğŸ“– Ø§Ù„Ø³ÙˆØ±Ø©</label>
<select class="form-select" id="surahSelect" onchange="loadSurah(this.value)"></select>
</div>
<div class="form-group">
<label class="form-label">ğŸŒ Ø§Ù„ØªØ±Ø¬Ù…Ø©</label>
<select class="form-select" id="transSelect" onchange="changeTranslation()"></select>
</div>
<div class="form-group">
<label class="form-label">ğŸ™ï¸ Ø§Ù„Ù‚Ø§Ø±Ø¦</label>
<select class="form-select" id="reciterSelect" onchange="changeReciter()"></select>
</div>
<div style="display:flex;gap:8px">
<div class="form-group" style="flex:1">
<label class="form-label">ğŸ“‘ Ø§Ù„Ø¬Ø²Ø¡</label>
<select class="form-select" id="juzSelect" onchange="loadJuz(this.value)"><option value="">Ø§Ø®ØªØ±</option></select>
</div>
<div class="form-group" style="flex:1">
<label class="form-label">ğŸ“„ Ø§Ù„ØµÙØ­Ø©</label>
<input type="number" class="form-input" id="pageInput" min="1" max="604" placeholder="1-604" onchange="loadPage(this.value)">
</div>
</div>
</div>
<div class="sb-tabs">
<button class="sb-tab act" onclick="switchSbTab('trans',this)">ğŸŒ ØªØ±Ø¬Ù…Ø©</button>
<button class="sb-tab" onclick="switchSbTab('tafsir',this)">ğŸ“– ØªÙØ³ÙŠØ±</button>
<button class="sb-tab" onclick="switchSbTab('search',this)">ğŸ” Ø¨Ø­Ø«</button>
<button class="sb-tab" onclick="switchSbTab('index',this)">ğŸ“‹ ÙÙ‡Ø±Ø³</button>
</div>
<div class="sb-body">
<div class="sb-panel act" id="sbp-trans"><div id="transContent"><p style="padding:20px;text-align:center;color:var(--tx3)">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù„Ù„Ø¨Ø¯Ø¡</p></div></div>
<div class="sb-panel" id="sbp-tafsir"><div id="tafsirContent"><p style="padding:20px;text-align:center;color:var(--tx3)">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ±</p></div></div>
<div class="sb-panel" id="sbp-search">
<div class="search-box"><span class="search-icon">ğŸ”</span><input class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†..." onkeyup="doSearch()"></div>
<div id="searchResults"></div>
</div>
<div class="sb-panel" id="sbp-index"><div id="surahIndex"></div></div>
</div>
</aside>

<!-- Main Quran -->
<main class="quran-main" id="qMain">
<!-- Welcome -->
<div id="welcomeScreen" style="text-align:center;padding:60px 20px">
<div style="font-size:60px;margin-bottom:16px">ğŸ“–</div>
<h1 style="font-family:var(--fq);font-size:32px;color:var(--p1);margin-bottom:8px">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
<p style="color:var(--tx2);margin-bottom:24px">Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</p>
<div style="font-family:var(--fq);font-size:22px;color:var(--p1);padding:20px;background:var(--g5);border:1px solid var(--g2);border-radius:var(--rd);max-width:520px;margin:0 auto;line-height:2.2">
ï´¿ Ø¥ÙÙ†ÙÙ‘ Ù‡ÙÙ€Ù°Ø°ÙØ§ Ù±Ù„Û¡Ù‚ÙØ±Û¡Ø¡ÙØ§Ù†Ù ÙŠÙÙ‡Û¡Ø¯ÙÙŠ Ù„ÙÙ„ÙÙ‘ØªÙÙŠ Ù‡ÙÙŠÙ Ø£ÙÙ‚Û¡ÙˆÙÙ…Ù ï´¾
</div>
<p style="color:var(--tx3);font-size:13px;margin-top:10px">Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡ - Ø§Ù„Ø¢ÙŠØ© Ù©</p>
</div>
<!-- Quran View -->
<div id="quranView" style="display:none">
<div style="display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:12px">
<button class="btn btn-sm btn-outline" onclick="chgFont(-2)">âˆ’</button>
<span style="font-size:12px;color:var(--tx3)" id="fontLbl">30</span>
<button class="btn btn-sm btn-outline" onclick="chgFont(2)">+</button>
</div>
<div class="quran-frame">
<div class="quran-inner">
<div class="surah-header" id="surahHeader"><div class="surah-name" id="surahName"></div><div class="surah-meta" id="surahMeta"></div></div>
<div class="bismillah" id="bismillah">Ø¨ÙØ³Û¡Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
<div class="ayah-container" id="ayahContainer"></div>
<div style="text-align:center;margin-top:14px;font-size:11px;color:var(--tx3);display:flex;justify-content:center;gap:16px" id="pageInfo"></div>
</div>
</div>
<div style="display:flex;justify-content:space-between;margin-top:16px">
<button class="btn btn-primary btn-sm" id="prevSurah" onclick="navSurah(-1)">â†’ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</button>
<button class="btn btn-primary btn-sm" id="nextSurah" onclick="navSurah(1)">Ø§Ù„ØªØ§Ù„ÙŠØ© â†</button>
</div>
</div>
</main>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 2: VIDEO MAKER -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-video">
<div class="vm-layout">
<!-- Preview -->
<div>
<div class="card">
<div class="card-h"><span class="icon">ğŸ‘ï¸</span> Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="preview-container" id="previewContainer">
<canvas id="previewCanvas" class="preview-canvas"></canvas>
<div class="preview-overlay">
<div class="preview-ayah" id="previewAyah">ï´¿ Ø¨ÙØ³Û¡Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù ï´¾</div>
<div class="preview-ref" id="previewRef">Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø© - Ø§Ù„Ø¢ÙŠØ© Ù¡</div>
</div>
</div>
<div class="btn-group" style="margin-top:12px;justify-content:center">
<button class="btn btn-primary" onclick="generateVideo()">ğŸ¬ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
<button class="btn btn-gold" onclick="captureFrame()">ğŸ“¸ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</button>
</div>
</div>
</div>

<!-- Controls -->
<div>
<div class="card">
<div class="card-h"><span class="icon">âš™ï¸</span> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="form-group">
<label class="form-label">ğŸ“– Ø§Ù„Ø³ÙˆØ±Ø©</label>
<select class="form-select" id="vmSurah" onchange="vmLoadSurah()"></select>
</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ù…Ù† Ø¢ÙŠØ©</label>
<input type="number" class="form-input" id="vmFromAyah" value="1" min="1">
</div>
<div class="form-group">
<label class="form-label">Ø¥Ù„Ù‰ Ø¢ÙŠØ©</label>
<input type="number" class="form-input" id="vmToAyah" value="7" min="1">
</div>
</div>
<div class="form-group">
<label class="form-label">ğŸ™ï¸ Ø§Ù„Ù‚Ø§Ø±Ø¦</label>
<select class="form-select" id="vmReciter"></select>
</div>
<div class="form-group">
<label class="form-label">ğŸ”Š ØµÙˆØª Ø¥Ø¶Ø§ÙÙŠ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²</label>
<input type="file" class="form-input" id="vmExtraAudio" accept="audio/*">
</div>
</div>

<!-- Platform Selection -->
<div class="card">
<div class="card-h"><span class="icon">ğŸ“±</span> Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØµØ© (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† ÙˆØ§Ø­Ø¯Ø©)</div>
<div class="platform-grid" id="platformGrid">
<div class="platform-card sel" data-platform="youtube" onclick="togglePlatform(this)">
<div class="p-icon">â–¶ï¸</div>
<div class="p-name">ÙŠÙˆØªÙŠÙˆØ¨</div>
<div class="p-spec">4K â€¢ 16:9 â€¢ H.264</div>
</div>
<div class="platform-card" data-platform="youtube-shorts" onclick="togglePlatform(this)">
<div class="p-icon">ğŸ“±</div>
<div class="p-name">Ø±ÙŠÙ„Ø² ÙŠÙˆØªÙŠÙˆØ¨</div>
<div class="p-spec">4K â€¢ 9:16 â€¢ H.264</div>
</div>
<div class="platform-card" data-platform="tiktok" onclick="togglePlatform(this)">
<div class="p-icon">ğŸµ</div>
<div class="p-name">ØªÙŠÙƒ ØªÙˆÙƒ</div>
<div class="p-spec">1080Ã—1920 â€¢ 9:16</div>
</div>
<div class="platform-card" data-platform="kwai" onclick="togglePlatform(this)">
<div class="p-icon">ğŸ¬</div>
<div class="p-name">ÙƒÙˆØ§ÙŠ</div>
<div class="p-spec">1080Ã—1920 â€¢ 9:16</div>
</div>
<div class="platform-card" data-platform="instagram" onclick="togglePlatform(this)">
<div class="p-icon">ğŸ“·</div>
<div class="p-name">Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</div>
<div class="p-spec">1080Ã—1920 â€¢ 9:16</div>
</div>
<div class="platform-card" data-platform="snapchat" onclick="togglePlatform(this)">
<div class="p-icon">ğŸ‘»</div>
<div class="p-name">Ø³Ù†Ø§Ø¨ Ø´Ø§Øª</div>
<div class="p-spec">1080Ã—1920 â€¢ 9:16</div>
</div>
</div>
</div>

<!-- Video Style -->
<div class="card">
<div class="card-h"><span class="icon">ğŸ¨</span> ØªØµÙ…ÙŠÙ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ø®Ù„ÙÙŠØ©</label>
<select class="form-select" id="vmBg" onchange="updatePreview()">
<option value="gradient-dark">ØªØ¯Ø±Ø¬ Ø¯Ø§ÙƒÙ†</option>
<option value="gradient-green">ØªØ¯Ø±Ø¬ Ø£Ø®Ø¶Ø±</option>
<option value="gradient-gold">ØªØ¯Ø±Ø¬ Ø°Ù‡Ø¨ÙŠ</option>
<option value="gradient-blue">ØªØ¯Ø±Ø¬ Ø£Ø²Ø±Ù‚</option>
<option value="gradient-purple">ØªØ¯Ø±Ø¬ Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
<option value="solid-black">Ø£Ø³ÙˆØ¯</option>
<option value="solid-dark">Ø¯Ø§ÙƒÙ†</option>
<option value="pattern-islamic">Ø²Ø®Ø±ÙØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</option>
<option value="custom-image">ØµÙˆØ±Ø© Ù…Ø®ØµØµØ©</option>
<option value="ai-generated">ØµÙˆØ±Ø© AI</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Ù„ÙˆÙ† Ø§Ù„Ù†Øµ</label>
<input type="color" class="form-input" id="vmTextColor" value="#FFFFFF" onchange="updatePreview()" style="height:40px;padding:4px">
</div>
</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
<input type="range" class="form-input" id="vmFontSize" min="16" max="60" value="28" oninput="updatePreview()" style="padding:4px">
</div>
<div class="form-group">
<label class="form-label">ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†Øµ</label>
<select class="form-select" id="vmTextAnim" onchange="updatePreview()">
<option value="fade">Ø¸Ù‡ÙˆØ± ØªØ¯Ø±ÙŠØ¬ÙŠ</option>
<option value="typewriter">Ø·Ø¨Ø§Ø¹Ø©</option>
<option value="slide-up">Ø§Ù†Ø²Ù„Ø§Ù‚ Ù„Ù„Ø£Ø¹Ù„Ù‰</option>
<option value="zoom">ØªÙƒØ¨ÙŠØ±</option>
<option value="glow">ØªÙˆÙ‡Ø¬</option>
</select>
</div>
</div>
<div class="form-group">
<label class="form-label">ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ© Ù…Ø®ØµØµØ©</label>
<input type="file" class="form-input" id="vmBgImage" accept="image/*" onchange="loadBgImage()">
</div>
</div>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 3: AI IMAGE GENERATOR -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-ai">
<div class="card">
<div class="card-h"><span class="icon">ğŸ¨</span> ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
<p style="font-size:13px;color:var(--tx2);margin-bottom:16px">Ø£Ù†Ø´Ø¦ Ø®Ù„ÙÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø© Ù„Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ù†Ù…Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
<select class="form-select" id="aiStyle">
<option value="islamic-art">Ø²Ø®Ø±ÙØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</option>
<option value="mosque">Ù…Ø³Ø¬Ø¯</option>
<option value="nature">Ø·Ø¨ÙŠØ¹Ø©</option>
<option value="space">ÙØ¶Ø§Ø¡</option>
<option value="calligraphy">Ø®Ø· Ø¹Ø±Ø¨ÙŠ</option>
<option value="geometric">Ù‡Ù†Ø¯Ø³ÙŠ</option>
<option value="watercolor">Ø£Ù„ÙˆØ§Ù† Ù…Ø§Ø¦ÙŠØ©</option>
<option value="abstract">ØªØ¬Ø±ÙŠØ¯ÙŠ</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Ø§Ù„Ø£Ù„ÙˆØ§Ù†</label>
<select class="form-select" id="aiColors">
<option value="green-gold">Ø£Ø®Ø¶Ø± ÙˆØ°Ù‡Ø¨ÙŠ</option>
<option value="blue-white">Ø£Ø²Ø±Ù‚ ÙˆØ£Ø¨ÙŠØ¶</option>
<option value="dark">Ø¯Ø§ÙƒÙ†</option>
<option value="warm">Ø¯Ø§ÙØ¦</option>
<option value="cool">Ø¨Ø§Ø±Ø¯</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø±Ø¶</label>
<select class="form-select" id="aiRatio">
<option value="9:16">9:16 Ø¹Ù…ÙˆØ¯ÙŠ</option>
<option value="16:9">16:9 Ø£ÙÙ‚ÙŠ</option>
<option value="1:1">1:1 Ù…Ø±Ø¨Ø¹</option>
<option value="4:5">4:5 Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</option>
</select>
</div>
</div>
<div class="form-group">
<label class="form-label">ÙˆØµÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
<input type="text" class="form-input" id="aiPrompt" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø³Ø¬Ø¯ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ Ù…Ø¹ Ù†Ø¬ÙˆÙ…...">
</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ±</label>
<select class="form-select" id="aiCount">
<option value="1">1 ØµÙˆØ±Ø©</option>
<option value="2">2 ØµÙˆØ±</option>
<option value="4" selected>4 ØµÙˆØ±</option>
<option value="6">6 ØµÙˆØ±</option>
<option value="8">8 ØµÙˆØ±</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØ±</label>
<select class="form-select" id="aiType">
<option value="static">ØµÙˆØ± Ø«Ø§Ø¨ØªØ©</option>
<option value="animated">ØµÙˆØ± Ù…ØªØ­Ø±ÙƒØ© (GIF)</option>
</select>
</div>
</div>
<button class="btn btn-gold btn-lg btn-block" onclick="generateAI()">ğŸ¨ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±</button>
</div>

<div class="card" id="aiResults" style="display:none">
<div class="card-h"><span class="icon">ğŸ–¼ï¸</span> Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ÙÙˆÙ„Ù‘Ø¯Ø©</div>
<div class="ai-grid" id="aiGrid"></div>
<div class="btn-group" style="margin-top:12px;justify-content:center">
<button class="btn btn-primary" onclick="downloadAllAI()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„</button>
<button class="btn btn-outline" onclick="useAsBackground()">ğŸ¬ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒØ®Ù„ÙÙŠØ© ÙÙŠØ¯ÙŠÙˆ</button>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 4: VIDEO EDITOR -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-editor">
<div class="card">
<div class="card-h"><span class="icon">âœ‚ï¸</span> Ù…Ø­Ø±Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">ğŸ“¹ ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ</label>
<input type="file" class="form-input" id="editorVideoFile" accept="video/*" onchange="loadEditorVideo()">
</div>
<div class="form-group">
<label class="form-label">ğŸ”Š Ø¥Ø¶Ø§ÙØ© ØµÙˆØª</label>
<input type="file" class="form-input" id="editorAudioFile" accept="audio/*">
</div>
</div>
<div style="background:#000;border-radius:var(--rd3);overflow:hidden;margin:12px 0;aspect-ratio:16/9">
<video id="editorVideo" style="width:100%;height:100%" controls></video>
</div>
<div class="editor-timeline">
<div class="timeline-track">
<span class="track-label">ğŸ¥ ÙÙŠØ¯ÙŠÙˆ</span>
<div class="track-wave" style="background:linear-gradient(90deg,var(--p3),var(--p4),var(--p3))"></div>
</div>
<div class="timeline-track">
<span class="track-label">ğŸ”Š ØµÙˆØª 1</span>
<div class="track-wave" style="background:linear-gradient(90deg,var(--g2),var(--g3),var(--g2))"></div>
</div>
<div class="timeline-track">
<span class="track-label">ğŸ”Š ØµÙˆØª 2</span>
<div class="track-wave" style="background:linear-gradient(90deg,#6366f1,#8b5cf6,#6366f1);opacity:.2"></div>
</div>
</div>
<div class="btn-group" style="margin-top:12px">
<button class="btn btn-primary" onclick="mergeAudioVideo()">ğŸ”€ Ø¯Ù…Ø¬ Ø§Ù„ØµÙˆØª Ù…Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
<button class="btn btn-outline" onclick="removeAudio()">ğŸ”‡ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØª</button>
<button class="btn btn-outline" onclick="trimVideo()">âœ‚ï¸ Ù‚Øµ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 5: LIVE STREAMING -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-live">
<div class="card">
<div class="card-h"><span class="icon">ğŸ“¡</span> Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± / ØªØ³Ø¬ÙŠÙ„</div>
<div class="form-row">
<div class="form-group">
<label class="form-label">Ù…ØµØ¯Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</label>
<select class="form-select" id="liveSource" onchange="changeLiveSource()">
<option value="camera">ğŸ“· Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</option>
<option value="screen">ğŸ–¥ï¸ Ø´Ø§Ø´Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Ø§Ù„Ø¬ÙˆØ¯Ø©</label>
<select class="form-select" id="liveQuality">
<option value="1080">1080p Full HD</option>
<option value="720">720p HD</option>
<option value="480">480p SD</option>
<option value="2160">4K Ultra HD</option>
</select>
</div>
</div>
<div style="background:#000;border-radius:var(--rd3);overflow:hidden;margin:12px 0;aspect-ratio:16/9;position:relative">
<video id="liveVideo" style="width:100%;height:100%" autoplay muted playsinline></video>
<div id="liveIndicator" style="display:none;position:absolute;top:12px;right:12px;background:#DC3545;color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700;animation:blink 1s infinite">ğŸ”´ Ù…Ø¨Ø§Ø´Ø±</div>
</div>
@keyframes blink{50%{opacity:.5}}
<div class="btn-group" style="justify-content:center">
<button class="btn btn-primary btn-lg" id="liveStartBtn" onclick="startLive()">ğŸ“¡ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø« / Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
<button class="btn btn-danger btn-lg" id="liveStopBtn" onclick="stopLive()" style="display:none">â¹ Ø¥ÙŠÙ‚Ø§Ù</button>
<button class="btn btn-gold" onclick="takePhoto()">ğŸ“¸ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</button>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 6: EXPORT -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-export">
<div class="card">
<div class="card-h"><span class="icon">ğŸ“¤</span> Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯</div>
<p style="font-size:13px;color:var(--tx2);margin-bottom:16px">Ø§Ø®ØªØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙŠØº ÙˆØ§Ù„Ø¬ÙˆØ¯Ø§Øª Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ ØªØµØ¯ÙŠØ±Ù‡Ø§ ÙÙŠ Ø¢Ù† ÙˆØ§Ø­Ø¯</p>

<div class="export-grid" id="exportGrid">
<label class="export-card">
<input type="checkbox" value="youtube-4k" checked> 
<div class="export-title">â–¶ï¸ ÙŠÙˆØªÙŠÙˆØ¨ 4K</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 3840Ã—2160 â€¢ 16:9 â€¢ AAC-LC 48kHz</div>
</label>
<label class="export-card">
<input type="checkbox" value="youtube-1080"> 
<div class="export-title">â–¶ï¸ ÙŠÙˆØªÙŠÙˆØ¨ 1080p</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1920Ã—1080 â€¢ 16:9 â€¢ AAC-LC</div>
</label>
<label class="export-card">
<input type="checkbox" value="youtube-shorts"> 
<div class="export-title">ğŸ“± ÙŠÙˆØªÙŠÙˆØ¨ Ø´ÙˆØ±ØªØ³ 4K</div>
<div class="export-desc">MP4 â€¢ H.264/H.265 â€¢ 2160Ã—3840 â€¢ 9:16 â€¢ AAC-LC 48kHz</div>
</label>
<label class="export-card">
<input type="checkbox" value="tiktok"> 
<div class="export-title">ğŸµ ØªÙŠÙƒ ØªÙˆÙƒ</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1920 â€¢ 9:16 â€¢ AAC 128-384kbps</div>
</label>
<label class="export-card">
<input type="checkbox" value="kwai"> 
<div class="export-title">ğŸ¬ ÙƒÙˆØ§ÙŠ</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1920 â€¢ 9:16 â€¢ AAC</div>
</label>
<label class="export-card">
<input type="checkbox" value="instagram-reels"> 
<div class="export-title">ğŸ“· Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø±ÙŠÙ„Ø²</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1920 â€¢ 9:16 â€¢ AAC 128-384kbps</div>
</label>
<label class="export-card">
<input type="checkbox" value="instagram-post"> 
<div class="export-title">ğŸ“· Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø¨ÙˆØ³Øª</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1080 â€¢ 1:1 â€¢ AAC</div>
</label>
<label class="export-card">
<input type="checkbox" value="instagram-story"> 
<div class="export-title">ğŸ“· Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù… Ø³ØªÙˆØ±ÙŠ</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1920 â€¢ 9:16 â€¢ AAC</div>
</label>
<label class="export-card">
<input type="checkbox" value="snapchat"> 
<div class="export-title">ğŸ‘» Ø³Ù†Ø§Ø¨ Ø´Ø§Øª</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1080Ã—1920 â€¢ 9:16 â€¢ AAC</div>
</label>
<label class="export-card">
<input type="checkbox" value="facebook"> 
<div class="export-title">ğŸ“˜ ÙÙŠØ³Ø¨ÙˆÙƒ</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1920Ã—1080 â€¢ 16:9 â€¢ AAC</div>
</label>
<label class="export-card">
<input type="checkbox" value="twitter"> 
<div class="export-title">ğŸ¦ ØªÙˆÙŠØªØ±/X</div>
<div class="export-desc">MP4 â€¢ H.264 â€¢ 1920Ã—1080 â€¢ 16:9 â€¢ AAC</div>
</label>
</div>

<div class="btn-group" style="margin-top:16px;justify-content:center">
<button class="btn btn-primary btn-lg" onclick="exportAll()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø¯Ø¯</button>
<button class="btn btn-gold btn-lg" onclick="exportSelected()">ğŸ“¤ ØªØµØ¯ÙŠØ± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·</button>
<button class="btn btn-outline" onclick="selectAllExports()">â˜‘ï¸ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
<button class="btn btn-outline" onclick="deselectAllExports()">â¬œ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„</button>
</div>

<div class="export-progress" id="exportProgress">
<div class="ep-bar"><div class="ep-fill" id="epFill"></div></div>
<div class="ep-text" id="epText">Ø¬Ø§Ø±Ù Ø§Ù„ØªØµØ¯ÙŠØ±...</div>
</div>
</div>

<!-- Export Specs Table -->
<div class="card">
<div class="card-h"><span class="icon">ğŸ“Š</span> Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ÙÙ†ÙŠØ© Ù„Ù„Ù…Ù†ØµØ§Øª</div>
<div style="overflow-x:auto">
<table style="width:100%;border-collapse:collapse;font-size:12px">
<thead>
<tr style="background:var(--p1);color:#fff">
<th style="padding:10px;text-align:right;border-radius:8px 0 0 0">Ø§Ù„Ù…Ù†ØµØ©</th>
<th style="padding:10px;text-align:center">Ø§Ù„ØµÙŠØºØ©</th>
<th style="padding:10px;text-align:center">Ø§Ù„ØªØ±Ù…ÙŠØ²</th>
<th style="padding:10px;text-align:center">Ø§Ù„Ø¯Ù‚Ø©</th>
<th style="padding:10px;text-align:center">Ø§Ù„ØµÙˆØª</th>
<th style="padding:10px;text-align:center;border-radius:0 8px 0 0">Ø§Ù„Ù†Ø³Ø¨Ø©</th>
</tr>
</thead>
<tbody id="specsTable">
<tr style="background:var(--bg2)"><td style="padding:8px">â–¶ï¸ ÙŠÙˆØªÙŠÙˆØ¨</td><td style="text-align:center">MP4/MOV</td><td style="text-align:center">H.264/H.265</td><td style="text-align:center">4K (3840Ã—2160)</td><td style="text-align:center">AAC-LC 48kHz</td><td style="text-align:center">16:9</td></tr>
<tr><td style="padding:8px">ğŸ“± Ø±ÙŠÙ„Ø² ÙŠÙˆØªÙŠÙˆØ¨</td><td style="text-align:center">MP4/MOV</td><td style="text-align:center">H.264/H.265</td><td style="text-align:center">4K (2160Ã—3840)</td><td style="text-align:center">AAC-LC 48kHz</td><td style="text-align:center">9:16</td></tr>
<tr style="background:var(--bg2)"><td style="padding:8px">ğŸµ ØªÙŠÙƒ ØªÙˆÙƒ</td><td style="text-align:center">MP4/MOV</td><td style="text-align:center">H.264</td><td style="text-align:center">1080Ã—1920</td><td style="text-align:center">AAC 128-384kbps</td><td style="text-align:center">9:16</td></tr>
<tr><td style="padding:8px">ğŸ¬ ÙƒÙˆØ§ÙŠ</td><td style="text-align:center">MP4</td><td style="text-align:center">H.264</td><td style="text-align:center">1080Ã—1920</td><td style="text-align:center">AAC</td><td style="text-align:center">9:16</td></tr>
<tr style="background:var(--bg2)"><td style="padding:8px">ğŸ“· Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…</td><td style="text-align:center">MP4/MOV</td><td style="text-align:center">H.264</td><td style="text-align:center">1080Ã—1920</td><td style="text-align:center">AAC 128-384kbps</td><td style="text-align:center">9:16, 1:1, 4:5</td></tr>
<tr><td style="padding:8px">ğŸ‘» Ø³Ù†Ø§Ø¨</td><td style="text-align:center">MP4/MOV</td><td style="text-align:center">H.264</td><td style="text-align:center">1080Ã—1920</td><td style="text-align:center">AAC</td><td style="text-align:center">9:16</td></tr>
</tbody>
</table>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SECTION 7: RECITERS -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="section" id="sec-reciters">
<div class="card">
<div class="card-h"><span class="icon">ğŸ™ï¸</span> Ø§Ù„Ù‚Ø±Ø§Ø¡ ÙˆØ§Ù„Ù…Ù‚Ø±Ø¦ÙŠÙ†</div>
<div class="search-box" style="margin-bottom:16px">
<span class="search-icon">ğŸ”</span>
<input class="search-input" id="reciterSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø§Ø±Ø¦..." oninput="filterReciters()">
</div>
<div class="reciters-grid" id="recitersGrid"></div>
</div>
</div>

<!-- â•â•â• AUDIO PLAYER BAR â•â•â• -->
<div class="player-bar" id="playerBar">
<div class="pl-info"><div class="pl-sname" id="plSurahName">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div><div class="pl-anum" id="plAyahNum">â€”</div></div>
<div class="pl-controls">
<button class="pl-btn" onclick="prevAyahAudio()">â®</button>
<button class="pl-btn main-btn" id="playPauseBtn" onclick="togglePlayPause()">â–¶</button>
<button class="pl-btn" onclick="nextAyahAudio()">â­</button>
<button class="pl-btn" id="repeatBtn" onclick="toggleRepeat()" style="font-size:13px">ğŸ”</button>
</div>
<div class="pl-progress">
<span class="progress-time" id="currentTime">0:00</span>
<div class="progress-bar" onclick="seekAudio(event)"><div class="progress-fill" id="progressFill"></div></div>
<span class="progress-time" id="durationTime">0:00</span>
</div>
</div>

<!-- â•â•â• TOAST â•â•â• -->
<div class="toast" id="toast"></div>

<!-- â•â•â• FOOTER â•â•â• -->
<footer class="app-footer">
<hr>
<p><strong>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù‚Ø±Ø¢Ù† ÙŠØªÙ„Ù‰ Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù„ÙŠÙ„ ÙˆØ¢Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±</strong></p>
<hr>
<p>Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ: AlQuran Cloud API (Ù…ÙØªÙˆØ­ Ø§Ù„Ù…ØµØ¯Ø± - Ø±Ø®ØµØ© MIT)</p>
<p>Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª: EveryAyah.com (Ù…ØªØ§Ø­Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ)</p>
<p>ØªÙØ³ÙŠØ± Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ†: Ù…Ù„Ùƒ Ø¹Ø§Ù… (Ø§Ù„Ù‚Ø±Ù† Ø§Ù„ØªØ§Ø³Ø¹ Ø§Ù„Ù‡Ø¬Ø±ÙŠ)</p>
<p>Ø§Ù„Ø®Ø·ÙˆØ·: Amiri Ùˆ Cairo (Ø±Ø®ØµØ© SIL Ø§Ù„Ù…ÙØªÙˆØ­Ø©)</p>
<hr>
<p>âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ <strong>ØºÙŠØ± ØªØ§Ø¨Ø¹ Ù„Ø£ÙŠ Ø¬Ù‡Ø© Ø±Ø³Ù…ÙŠØ©</strong></p>
<p>ğŸ“§ <a href="mailto:ali.ibrahim2150@gmail.com">ali.ibrahim2150@gmail.com</a></p>
<p>Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ‚ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ø­ÙÙˆØ¸Ø© Â© <span id="yearFooter"></span></p>
<p>Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ ÙˆØ§Ù„ØªÙØ³ÙŠØ±ÙŠ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ù„Ùƒ Ø¹Ø§Ù… ÙˆÙ…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±</p>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- JAVASCRIPT -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
;(function(){"use strict";

// â•â•â• PROTECTION â•â•â•
document.addEventListener('contextmenu',e=>e.preventDefault());
document.addEventListener('selectstart',e=>{if(!e.target.closest('input,textarea'))e.preventDefault()});
document.addEventListener('copy',e=>{if(!e.target.closest('input,textarea'))e.preventDefault()});
document.addEventListener('cut',e=>e.preventDefault());
document.addEventListener('dragstart',e=>e.preventDefault());
document.addEventListener('keydown',e=>{
if(e.key==='F12'||(e.ctrlKey&&e.shiftKey&&['I','J','C'].includes(e.key))||
(e.ctrlKey&&['U','S'].includes(e.key)))e.preventDefault();
});
try{Object.defineProperty(document,'owner',{value:'ali.ibrahim2150@gmail.com',writable:false,configurable:false})}catch(e){}
console.log('%câš ï¸ ØªØ­Ø°ÙŠØ± Ø£Ù…Ù†ÙŠ','color:red;font-size:24px;font-weight:bold');
console.log('%cÙ‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø­Ù…ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ ali.ibrahim2150@gmail.com','color:#1B4332;font-size:14px');

// â•â•â• DATA â•â•â•
const SURAHS=[
{n:1,a:"Ø§Ù„ÙØ§ØªØ­Ø©",c:7,t:"Ù…ÙƒÙŠØ©"},{n:2,a:"Ø§Ù„Ø¨Ù‚Ø±Ø©",c:286,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:3,a:"Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†",c:200,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:4,a:"Ø§Ù„Ù†Ø³Ø§Ø¡",c:176,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:5,a:"Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©",c:120,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:6,a:"Ø§Ù„Ø£Ù†Ø¹Ø§Ù…",c:165,t:"Ù…ÙƒÙŠØ©"},
{n:7,a:"Ø§Ù„Ø£Ø¹Ø±Ø§Ù",c:206,t:"Ù…ÙƒÙŠØ©"},{n:8,a:"Ø§Ù„Ø£Ù†ÙØ§Ù„",c:75,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:9,a:"Ø§Ù„ØªÙˆØ¨Ø©",c:129,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:10,a:"ÙŠÙˆÙ†Ø³",c:109,t:"Ù…ÙƒÙŠØ©"},{n:11,a:"Ù‡ÙˆØ¯",c:123,t:"Ù…ÙƒÙŠØ©"},{n:12,a:"ÙŠÙˆØ³Ù",c:111,t:"Ù…ÙƒÙŠØ©"},
{n:13,a:"Ø§Ù„Ø±Ø¹Ø¯",c:43,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:14,a:"Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…",c:52,t:"Ù…ÙƒÙŠØ©"},{n:15,a:"Ø§Ù„Ø­Ø¬Ø±",c:99,t:"Ù…ÙƒÙŠØ©"},
{n:16,a:"Ø§Ù„Ù†Ø­Ù„",c:128,t:"Ù…ÙƒÙŠØ©"},{n:17,a:"Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡",c:111,t:"Ù…ÙƒÙŠØ©"},{n:18,a:"Ø§Ù„ÙƒÙ‡Ù",c:110,t:"Ù…ÙƒÙŠØ©"},
{n:19,a:"Ù…Ø±ÙŠÙ…",c:98,t:"Ù…ÙƒÙŠØ©"},{n:20,a:"Ø·Ù‡",c:135,t:"Ù…ÙƒÙŠØ©"},{n:21,a:"Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡",c:112,t:"Ù…ÙƒÙŠØ©"},
{n:22,a:"Ø§Ù„Ø­Ø¬",c:78,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:23,a:"Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†",c:118,t:"Ù…ÙƒÙŠØ©"},{n:24,a:"Ø§Ù„Ù†ÙˆØ±",c:64,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:25,a:"Ø§Ù„ÙØ±Ù‚Ø§Ù†",c:77,t:"Ù…ÙƒÙŠØ©"},{n:26,a:"Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡",c:227,t:"Ù…ÙƒÙŠØ©"},{n:27,a:"Ø§Ù„Ù†Ù…Ù„",c:93,t:"Ù…ÙƒÙŠØ©"},
{n:28,a:"Ø§Ù„Ù‚ØµØµ",c:88,t:"Ù…ÙƒÙŠØ©"},{n:29,a:"Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª",c:69,t:"Ù…ÙƒÙŠØ©"},{n:30,a:"Ø§Ù„Ø±ÙˆÙ…",c:60,t:"Ù…ÙƒÙŠØ©"},
{n:31,a:"Ù„Ù‚Ù…Ø§Ù†",c:34,t:"Ù…ÙƒÙŠØ©"},{n:32,a:"Ø§Ù„Ø³Ø¬Ø¯Ø©",c:30,t:"Ù…ÙƒÙŠØ©"},{n:33,a:"Ø§Ù„Ø£Ø­Ø²Ø§Ø¨",c:73,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:34,a:"Ø³Ø¨Ø£",c:54,t:"Ù…ÙƒÙŠØ©"},{n:35,a:"ÙØ§Ø·Ø±",c:45,t:"Ù…ÙƒÙŠØ©"},{n:36,a:"ÙŠØ³",c:83,t:"Ù…ÙƒÙŠØ©"},
{n:37,a:"Ø§Ù„ØµØ§ÙØ§Øª",c:182,t:"Ù…ÙƒÙŠØ©"},{n:38,a:"Øµ",c:88,t:"Ù…ÙƒÙŠØ©"},{n:39,a:"Ø§Ù„Ø²Ù…Ø±",c:75,t:"Ù…ÙƒÙŠØ©"},
{n:40,a:"ØºØ§ÙØ±",c:85,t:"Ù…ÙƒÙŠØ©"},{n:41,a:"ÙØµÙ„Øª",c:54,t:"Ù…ÙƒÙŠØ©"},{n:42,a:"Ø§Ù„Ø´ÙˆØ±Ù‰",c:53,t:"Ù…ÙƒÙŠØ©"},
{n:43,a:"Ø§Ù„Ø²Ø®Ø±Ù",c:89,t:"Ù…ÙƒÙŠØ©"},{n:44,a:"Ø§Ù„Ø¯Ø®Ø§Ù†",c:59,t:"Ù…ÙƒÙŠØ©"},{n:45,a:"Ø§Ù„Ø¬Ø§Ø«ÙŠØ©",c:37,t:"Ù…ÙƒÙŠØ©"},
{n:46,a:"Ø§Ù„Ø£Ø­Ù‚Ø§Ù",c:35,t:"Ù…ÙƒÙŠØ©"},{n:47,a:"Ù…Ø­Ù…Ø¯",c:38,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:48,a:"Ø§Ù„ÙØªØ­",c:29,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:49,a:"Ø§Ù„Ø­Ø¬Ø±Ø§Øª",c:18,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:50,a:"Ù‚",c:45,t:"Ù…ÙƒÙŠØ©"},{n:51,a:"Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª",c:60,t:"Ù…ÙƒÙŠØ©"},
{n:52,a:"Ø§Ù„Ø·ÙˆØ±",c:49,t:"Ù…ÙƒÙŠØ©"},{n:53,a:"Ø§Ù„Ù†Ø¬Ù…",c:62,t:"Ù…ÙƒÙŠØ©"},{n:54,a:"Ø§Ù„Ù‚Ù…Ø±",c:55,t:"Ù…ÙƒÙŠØ©"},
{n:55,a:"Ø§Ù„Ø±Ø­Ù…Ù†",c:78,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:56,a:"Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©",c:96,t:"Ù…ÙƒÙŠØ©"},{n:57,a:"Ø§Ù„Ø­Ø¯ÙŠØ¯",c:29,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:58,a:"Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©",c:22,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:59,a:"Ø§Ù„Ø­Ø´Ø±",c:24,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:60,a:"Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©",c:13,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:61,a:"Ø§Ù„ØµÙ",c:14,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:62,a:"Ø§Ù„Ø¬Ù…Ø¹Ø©",c:11,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:63,a:"Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†",c:11,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:64,a:"Ø§Ù„ØªØºØ§Ø¨Ù†",c:18,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:65,a:"Ø§Ù„Ø·Ù„Ø§Ù‚",c:12,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:66,a:"Ø§Ù„ØªØ­Ø±ÙŠÙ…",c:12,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:67,a:"Ø§Ù„Ù…Ù„Ùƒ",c:30,t:"Ù…ÙƒÙŠØ©"},{n:68,a:"Ø§Ù„Ù‚Ù„Ù…",c:52,t:"Ù…ÙƒÙŠØ©"},{n:69,a:"Ø§Ù„Ø­Ø§Ù‚Ø©",c:52,t:"Ù…ÙƒÙŠØ©"},
{n:70,a:"Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬",c:44,t:"Ù…ÙƒÙŠØ©"},{n:71,a:"Ù†ÙˆØ­",c:28,t:"Ù…ÙƒÙŠØ©"},{n:72,a:"Ø§Ù„Ø¬Ù†",c:28,t:"Ù…ÙƒÙŠØ©"},
{n:73,a:"Ø§Ù„Ù…Ø²Ù…Ù„",c:20,t:"Ù…ÙƒÙŠØ©"},{n:74,a:"Ø§Ù„Ù…Ø¯Ø«Ø±",c:56,t:"Ù…ÙƒÙŠØ©"},{n:75,a:"Ø§Ù„Ù‚ÙŠØ§Ù…Ø©",c:40,t:"Ù…ÙƒÙŠØ©"},
{n:76,a:"Ø§Ù„Ø¥Ù†Ø³Ø§Ù†",c:31,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:77,a:"Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª",c:50,t:"Ù…ÙƒÙŠØ©"},{n:78,a:"Ø§Ù„Ù†Ø¨Ø£",c:40,t:"Ù…ÙƒÙŠØ©"},
{n:79,a:"Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª",c:46,t:"Ù…ÙƒÙŠØ©"},{n:80,a:"Ø¹Ø¨Ø³",c:42,t:"Ù…ÙƒÙŠØ©"},{n:81,a:"Ø§Ù„ØªÙƒÙˆÙŠØ±",c:29,t:"Ù…ÙƒÙŠØ©"},
{n:82,a:"Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±",c:19,t:"Ù…ÙƒÙŠØ©"},{n:83,a:"Ø§Ù„Ù…Ø·ÙÙÙŠÙ†",c:36,t:"Ù…ÙƒÙŠØ©"},{n:84,a:"Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚",c:25,t:"Ù…ÙƒÙŠØ©"},
{n:85,a:"Ø§Ù„Ø¨Ø±ÙˆØ¬",c:22,t:"Ù…ÙƒÙŠØ©"},{n:86,a:"Ø§Ù„Ø·Ø§Ø±Ù‚",c:17,t:"Ù…ÙƒÙŠØ©"},{n:87,a:"Ø§Ù„Ø£Ø¹Ù„Ù‰",c:19,t:"Ù…ÙƒÙŠØ©"},
{n:88,a:"Ø§Ù„ØºØ§Ø´ÙŠØ©",c:26,t:"Ù…ÙƒÙŠØ©"},{n:89,a:"Ø§Ù„ÙØ¬Ø±",c:30,t:"Ù…ÙƒÙŠØ©"},{n:90,a:"Ø§Ù„Ø¨Ù„Ø¯",c:20,t:"Ù…ÙƒÙŠØ©"},
{n:91,a:"Ø§Ù„Ø´Ù…Ø³",c:15,t:"Ù…ÙƒÙŠØ©"},{n:92,a:"Ø§Ù„Ù„ÙŠÙ„",c:21,t:"Ù…ÙƒÙŠØ©"},{n:93,a:"Ø§Ù„Ø¶Ø­Ù‰",c:11,t:"Ù…ÙƒÙŠØ©"},
{n:94,a:"Ø§Ù„Ø´Ø±Ø­",c:8,t:"Ù…ÙƒÙŠØ©"},{n:95,a:"Ø§Ù„ØªÙŠÙ†",c:8,t:"Ù…ÙƒÙŠØ©"},{n:96,a:"Ø§Ù„Ø¹Ù„Ù‚",c:19,t:"Ù…ÙƒÙŠØ©"},
{n:97,a:"Ø§Ù„Ù‚Ø¯Ø±",c:5,t:"Ù…ÙƒÙŠØ©"},{n:98,a:"Ø§Ù„Ø¨ÙŠÙ†Ø©",c:8,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:99,a:"Ø§Ù„Ø²Ù„Ø²Ù„Ø©",c:8,t:"Ù…Ø¯Ù†ÙŠØ©"},
{n:100,a:"Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª",c:11,t:"Ù…ÙƒÙŠØ©"},{n:101,a:"Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©",c:11,t:"Ù…ÙƒÙŠØ©"},{n:102,a:"Ø§Ù„ØªÙƒØ§Ø«Ø±",c:8,t:"Ù…ÙƒÙŠØ©"},
{n:103,a:"Ø§Ù„Ø¹ØµØ±",c:3,t:"Ù…ÙƒÙŠØ©"},{n:104,a:"Ø§Ù„Ù‡Ù…Ø²Ø©",c:9,t:"Ù…ÙƒÙŠØ©"},{n:105,a:"Ø§Ù„ÙÙŠÙ„",c:5,t:"Ù…ÙƒÙŠØ©"},
{n:106,a:"Ù‚Ø±ÙŠØ´",c:4,t:"Ù…ÙƒÙŠØ©"},{n:107,a:"Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†",c:7,t:"Ù…ÙƒÙŠØ©"},{n:108,a:"Ø§Ù„ÙƒÙˆØ«Ø±",c:3,t:"Ù…ÙƒÙŠØ©"},
{n:109,a:"Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†",c:6,t:"Ù…ÙƒÙŠØ©"},{n:110,a:"Ø§Ù„Ù†ØµØ±",c:3,t:"Ù…Ø¯Ù†ÙŠØ©"},{n:111,a:"Ø§Ù„Ù…Ø³Ø¯",c:5,t:"Ù…ÙƒÙŠØ©"},
{n:112,a:"Ø§Ù„Ø¥Ø®Ù„Ø§Øµ",c:4,t:"Ù…ÙƒÙŠØ©"},{n:113,a:"Ø§Ù„ÙÙ„Ù‚",c:5,t:"Ù…ÙƒÙŠØ©"},{n:114,a:"Ø§Ù„Ù†Ø§Ø³",c:6,t:"Ù…ÙƒÙŠØ©"}
];

const RECITERS=[
{id:'Alafasy_128kbps',n:'Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Abdul_Basit_Murattal_192kbps',n:'Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯',s:'Ù…Ø±ØªÙ„'},
{id:'Abdul_Basit_Mujawwad_128kbps',n:'Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯',s:'Ù…Ø¬ÙˆØ¯'},{id:'Husary_128kbps',n:'Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ',s:'Ù…Ø±ØªÙ„'},
{id:'Husary_Muallim_128kbps',n:'Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ',s:'Ù…Ø¹Ù„Ù…'},{id:'Minshawy_Murattal_128kbps',n:'Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ',s:'Ù…Ø±ØªÙ„'},
{id:'Minshawy_Mujawwad_192kbps',n:'Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ',s:'Ù…Ø¬ÙˆØ¯'},{id:'Abdurrahmaan_As-Sudais_192kbps',n:'Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¯ÙŠØ³',s:'Ù…Ø±ØªÙ„'},
{id:'Abu_Bakr_Ash-Shaatree_128kbps',n:'Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„Ø´Ø§Ø·Ø±ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Saood_ash-Shuraym_128kbps',n:'Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠÙ…',s:'Ù…Ø±ØªÙ„'},
{id:'Hani_Rifai_192kbps',n:'Ù‡Ø§Ù†ÙŠ Ø§Ù„Ø±ÙØ§Ø¹ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Maher_AlMuaiqly_128kbps',n:'Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ',s:'Ù…Ø±ØªÙ„'},
{id:'Muhammad_Jibreel_128kbps',n:'Ù…Ø­Ù…Ø¯ Ø¬Ø¨Ø±ÙŠÙ„',s:'Ù…Ø±ØªÙ„'},{id:'Muhammad_Ayyoub_128kbps',n:'Ù…Ø­Ù…Ø¯ Ø£ÙŠÙˆØ¨',s:'Ù…Ø±ØªÙ„'},
{id:'Yasser_Ad-Dussary_128kbps',n:'ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Ahmed_ibn_Ali_al-Ajamy_128kbps_ketaballah.net',n:'Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø¬Ù…ÙŠ',s:'Ù…Ø±ØªÙ„'},
{id:'Nasser_Alqatami_128kbps',n:'Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø·Ø§Ù…ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Ali_Jaber_192kbps',n:'Ø¹Ù„ÙŠ Ø¬Ø§Ø¨Ø±',s:'Ù…Ø±ØªÙ„'},
{id:'Fares_Abbad_64kbps',n:'ÙØ§Ø±Ø³ Ø¹Ø¨Ø§Ø¯',s:'Ù…Ø±ØªÙ„'},{id:'Sahl_Yassin_128kbps',n:'Ø³Ù‡Ù„ ÙŠØ§Ø³ÙŠÙ†',s:'Ù…Ø±ØªÙ„'},
{id:'Salah_AlBudworthy',n:'ØµÙ„Ø§Ø­ Ø§Ù„Ø¨Ø¯ÙˆØ±Ø¯ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Abdullah_Basfar_192kbps',n:'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨ØµÙØ±',s:'Ù…Ø±ØªÙ„'},
{id:'Khalefa_Al_Tunaiji_64kbps',n:'Ø®Ù„ÙŠÙØ© Ø§Ù„Ø·Ù†ÙŠØ¬ÙŠ',s:'Ù…Ø±ØªÙ„'},{id:'Abdullah_Matroud_128kbps',n:'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ù…Ø·Ø±ÙˆØ¯',s:'Ù…Ø±ØªÙ„'},
{id:'Ibrahim_Akhdar_32kbps',n:'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø®Ø¶Ø±',s:'Ù…Ø±ØªÙ„'},{id:'Khaalid_Abdullaah_al-Qahtaanee_192kbps',n:'Ø®Ø§Ù„Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ',s:'Ù…Ø±ØªÙ„'},
{id:'Ahmed_Neana_128kbps',n:'Ø£Ø­Ù…Ø¯ Ù†Ø¹ÙŠÙ†Ø¹',s:'Ù…Ø±ØªÙ„'},{id:'Parhizgar_48kbps',n:'Ø´Ù‡Ø±ÙŠØ§Ø± Ø¨Ø§Ø±Ø­Ø²ÙƒØ§Ø±',s:'Ù…Ø±ØªÙ„'},
{id:'Ayman_Sowaid_64kbps',n:'Ø£ÙŠÙ…Ù† Ø³ÙˆÙŠØ¯',s:'Ù…Ø±ØªÙ„'},{id:'Mishari_Walk_128kbps',n:'Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ',s:'Ø­ÙØµ Ø¹Ù† Ø¹Ø§ØµÙ…'}
];

const TRANSLATIONS=[
{id:'ar.jalalayn',n:'ØªÙØ³ÙŠØ± Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ†',l:'ar'},{id:'en.sahih',n:'English - Saheeh Intl',l:'en'},
{id:'en.asad',n:'English - Muhammad Asad',l:'en'},{id:'fr.hamidullah',n:'FranÃ§ais',l:'fr'},
{id:'es.asad',n:'EspaÃ±ol',l:'es'},{id:'pt.elhayek',n:'PortuguÃªs',l:'pt'},
{id:'it.piccardo',n:'Italiano',l:'it'},{id:'nl.keyzer',n:'Nederlands',l:'nl'},
{id:'ru.kuliev',n:'Ğ ÑƒÑÑĞºĞ¸Ğ¹',l:'ru'},{id:'tr.ates',n:'TÃ¼rkÃ§e',l:'tr'},
{id:'zh.majian',n:'ä¸­æ–‡',l:'zh'},{id:'ja.japanese',n:'æ—¥æœ¬èª',l:'ja'},
{id:'hi.hindi',n:'à¤¹à¤¿à¤¨à¥à¤¦à¥€',l:'hi'},{id:'uk.yakubovych',n:'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°',l:'uk'},
{id:'de.bubenheim',n:'Deutsch',l:'de'},{id:'ur.jalandhry',n:'Ø§Ø±Ø¯Ùˆ',l:'ur'},
{id:'bn.bengali',n:'à¦¬à¦¾à¦‚à¦²à¦¾',l:'bn'},{id:'id.indonesian',n:'Indonesia',l:'id'},
{id:'ko.korean',n:'í•œêµ­ì–´',l:'ko'},{id:'ms.basmeih',n:'Melayu',l:'ms'}
];

const PLATFORMS={
'youtube':{w:3840,h:2160,r:'16:9',fmt:'MP4',codec:'H.264',audio:'AAC-LC 48kHz'},
'youtube-shorts':{w:2160,h:3840,r:'9:16',fmt:'MP4',codec:'H.264/H.265',audio:'AAC-LC 48kHz'},
'tiktok':{w:1080,h:1920,r:'9:16',fmt:'MP4',codec:'H.264',audio:'AAC 128-384kbps'},
'kwai':{w:1080,h:1920,r:'9:16',fmt:'MP4',codec:'H.264',audio:'AAC'},
'instagram-reels':{w:1080,h:1920,r:'9:16',fmt:'MP4',codec:'H.264',audio:'AAC 128-384kbps'},
'instagram-post':{w:1080,h:1080,r:'1:1',fmt:'MP4',codec:'H.264',audio:'AAC'},
'instagram-story':{w:1080,h:1920,r:'9:16',fmt:'MP4',codec:'H.264',audio:'AAC'},
'snapchat':{w:1080,h:1920,r:'9:16',fmt:'MP4',codec:'H.264',audio:'AAC'},
'facebook':{w:1920,h:1080,r:'16:9',fmt:'MP4',codec:'H.264',audio:'AAC'},
'twitter':{w:1920,h:1080,r:'16:9',fmt:'MP4',codec:'H.264',audio:'AAC'}
};

// â•â•â• STATE â•â•â•
let curSurah=null,curAyahs=[],curTrans=[],curTafsir=[];
let selAyNum=null,playIdx=0,isPlaying=false,isRepeat=false;
let audioEl=new Audio();
let fontSize=parseInt(localStorage.getItem('fs')||'30');
let mediaRecorder=null,recordedChunks=[];
let selectedPlatforms=['youtube'];

// â•â•â• INIT â•â•â•
window.addEventListener('DOMContentLoaded',init);
function init(){
document.getElementById('yearFooter').textContent=new Date().getFullYear();
populateSelects();buildIndex();buildRecitersGrid();
applyTheme(localStorage.getItem('thm')||'light');
document.documentElement.style.setProperty('--qs',fontSize+'px');
document.getElementById('fontLbl').textContent=fontSize;
audioEl.addEventListener('timeupdate',updateProgress);
audioEl.addEventListener('ended',onAudioEnded);
audioEl.addEventListener('loadedmetadata',()=>{document.getElementById('durationTime').textContent=formatTime(audioEl.duration)});
const last=localStorage.getItem('lastS');
if(last)loadSurah(parseInt(last));
initCanvas();
}

function populateSelects(){
const ss=document.getElementById('surahSelect');
const vs=document.getElementById('vmSurah');
ss.innerHTML='<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©</option>';
vs.innerHTML='<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©</option>';
SURAHS.forEach(s=>{
const o=`<option value="${s.n}">${s.n}. Ø³ÙˆØ±Ø© ${s.a}</option>`;
ss.innerHTML+=o;vs.innerHTML+=o;
});
const ts=document.getElementById('transSelect');
TRANSLATIONS.forEach(t=>{ts.innerHTML+=`<option value="${t.id}">${t.n}</option>`});
const rs=document.getElementById('reciterSelect');
const vr=document.getElementById('vmReciter');
RECITERS.forEach(r=>{
const o=`<option value="${r.id}">${r.n} (${r.s})</option>`;
rs.innerHTML+=o;vr.innerHTML+=o;
});
const js=document.getElementById('juzSelect');
for(let i=1;i<=30;i++)js.innerHTML+=`<option value="${i}">Ø§Ù„Ø¬Ø²Ø¡ ${i}</option>`;
}

function buildIndex(){
const el=document.getElementById('surahIndex');
let h='';
SURAHS.forEach(s=>{
h+=`<div class="surah-item" id="idx-${s.n}" onclick="loadSurah(${s.n})">
<div class="s-num"><span>${s.n}</span></div>
<div><div class="s-name">Ø³ÙˆØ±Ø© ${s.a}</div><div class="s-info">${s.t} | ${s.c} Ø¢ÙŠØ©</div></div></div>`;
});
el.innerHTML=h;
}

function buildRecitersGrid(){
const el=document.getElementById('recitersGrid');
let h='';
RECITERS.forEach((r,i)=>{
h+=`<div class="reciter-card${i===0?' sel':''}" onclick="selectReciter(this,'${r.id}')" data-name="${r.n} ${r.s}">
<div class="reciter-avatar">ğŸ™ï¸</div>
<div><div class="reciter-name">${r.n}</div><div class="reciter-style">${r.s}</div></div></div>`;
});
el.innerHTML=h;
}

function filterReciters(){
const q=document.getElementById('reciterSearch').value.trim().toLowerCase();
document.querySelectorAll('.reciter-card').forEach(c=>{
c.style.display=c.dataset.name.toLowerCase().includes(q)?'':'none';
});
}

function selectReciter(el,id){
document.querySelectorAll('.reciter-card').forEach(c=>c.classList.remove('sel'));
el.classList.add('sel');
document.getElementById('reciterSelect').value=id;
if(isPlaying)playCurAyah();
showToast('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø±Ø¦');
}

// â•â•â• LOAD SURAH â•â•â•
async function loadSurah(num){
num=parseInt(num);if(!num)return;
curSurah=SURAHS.find(s=>s.n===num);
document.getElementById('welcomeScreen').style.display='none';
document.getElementById('quranView').style.display='block';
document.getElementById('surahSelect').value=num;
document.getElementById('surahName').textContent='Ø³ÙˆØ±Ø© '+curSurah.a;
document.getElementById('surahMeta').innerHTML=`<span>${curSurah.t}</span><span>${curSurah.c} Ø¢ÙŠØ©</span>`;
document.getElementById('bismillah').style.display=(num===1||num===9)?'none':'block';
document.getElementById('prevSurah').disabled=(num<=1);
document.getElementById('nextSurah').disabled=(num>=114);
document.getElementById('plSurahName').textContent='Ø³ÙˆØ±Ø© '+curSurah.a;
localStorage.setItem('lastS',num);
stopAudio();
document.querySelectorAll('.surah-item').forEach(e=>e.classList.remove('act'));
const idx=document.getElementById('idx-'+num);
if(idx){idx.classList.add('act');idx.scrollIntoView({block:'nearest'})}
document.getElementById('ayahContainer').innerHTML='<div class="loading"><div class="spinner"></div><span>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©...</span></div>';
document.getElementById('qMain').scrollTo({top:0,behavior:'smooth'});
try{
const res=await fetch(`https://api.alquran.cloud/v1/surah/${num}/quran-uthmani`);
const data=await res.json();
if(data.code===200){curAyahs=data.data.ayahs;renderAyahs()}else throw new Error();
}catch(e){
document.getElementById('ayahContainer').innerHTML=`<div class="loading"><span style="color:#DC3545">âŒ Ø®Ø·Ø£ - <button class="btn btn-sm btn-primary" onclick="loadSurah(${num})">Ø¥Ø¹Ø§Ø¯Ø©</button></span></div>`;
}
fetchTranslation(num);fetchTafsir(num);
}

function renderAyahs(){
let h='';
curAyahs.forEach(a=>{
h+=`<span class="ayah-text" id="ay-${a.numberInSurah}">${a.text}</span>`;
h+=`<span class="ayah-num" onclick="ayahAction(${a.numberInSurah})" title="Ø¢ÙŠØ© ${a.numberInSurah}">${a.numberInSurah}</span> `;
});
document.getElementById('ayahContainer').innerHTML=h;
if(curAyahs.length>0){
const f=curAyahs[0];
document.getElementById('pageInfo').innerHTML=`<span>ğŸ“„ Ø§Ù„ØµÙØ­Ø©: ${f.page}</span><span>ğŸ“‘ Ø§Ù„Ø¬Ø²Ø¡: ${f.juz}</span><span>Ø§Ù„Ø­Ø²Ø¨: ${f.hizbQuarter}</span>`;
}
}

async function fetchTranslation(num){
const lang=document.getElementById('transSelect').value;
try{
const res=await fetch(`https://api.alquran.cloud/v1/surah/${num}/${lang}`);
const data=await res.json();
if(data.code===200){curTrans=data.data.ayahs;renderTranslation()}else throw new Error();
}catch(e){document.getElementById('transContent').innerHTML='<p style="padding:20px;text-align:center;color:#DC3545">âŒ Ø§Ù„ØªØ±Ø¬Ù…Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©</p>';curTrans=[];}
}

function renderTranslation(){
let h='';
curTrans.forEach(a=>{
h+=`<div class="trans-verse" id="tr-${a.numberInSurah}" onclick="highlightAyah(${a.numberInSurah})">
<span class="trans-num">${a.numberInSurah}</span><span class="trans-text">${a.text}</span></div>`;
});
document.getElementById('transContent').innerHTML=h;
}

async function fetchTafsir(num){
try{
const res=await fetch(`https://api.alquran.cloud/v1/surah/${num}/ar.jalalayn`);
const data=await res.json();
if(data.code===200){curTafsir=data.data.ayahs;renderTafsir()}
}catch(e){curTafsir=[];}
}

function renderTafsir(){
let h='';
curTafsir.forEach((a,i)=>{
const ar=curAyahs[i]?curAyahs[i].text:'';
h+=`<div class="trans-verse" onclick="highlightAyah(${a.numberInSurah})" style="flex-direction:column;gap:6px">
<div style="font-family:var(--fq);font-size:15px;color:var(--p1);background:var(--g5);padding:6px 10px;border-radius:6px;line-height:2">ï´¿ ${ar} ï´¾ [${a.numberInSurah}]</div>
<div class="trans-text">${a.text}</div></div>`;
});
document.getElementById('tafsirContent').innerHTML=h;
}

function changeTranslation(){if(curSurah)fetchTranslation(curSurah.n)}
function changeReciter(){if(isPlaying)playCurAyah();showToast('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø±Ø¦')}

async function loadJuz(num){
num=parseInt(num);if(!num)return;
document.getElementById('welcomeScreen').style.display='none';
document.getElementById('quranView').style.display='block';
document.getElementById('surahName').textContent='Ø§Ù„Ø¬Ø²Ø¡ '+num;
document.getElementById('surahMeta').innerHTML='';
document.getElementById('bismillah').style.display='none';
document.getElementById('ayahContainer').innerHTML='<div class="loading"><div class="spinner"></div><span>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></div>';
stopAudio();
try{
const res=await fetch(`https://api.alquran.cloud/v1/juz/${num}/quran-uthmani`);
const data=await res.json();
if(data.code===200){curAyahs=data.data.ayahs;let h='',ls=0;
curAyahs.forEach(a=>{if(a.surah.number!==ls){ls=a.surah.number;h+=`<div class="surah-header" style="margin:14px 0"><div class="surah-name" style="font-size:20px">Ø³ÙˆØ±Ø© ${a.surah.name}</div></div>`}
h+=`<span class="ayah-text">${a.text}</span><span class="ayah-num">${a.numberInSurah}</span> `});
document.getElementById('ayahContainer').innerHTML=h;document.getElementById('pageInfo').innerHTML=''}
}catch(e){document.getElementById('ayahContainer').innerHTML='<div class="loading"><span style="color:#DC3545">âŒ Ø®Ø·Ø£</span></div>'}
}

async function loadPage(num){
num=parseInt(num);if(!num||num<1||num>604)return;
document.getElementById('welcomeScreen').style.display='none';
document.getElementById('quranView').style.display='block';
document.getElementById('surahName').textContent='Ø§Ù„ØµÙØ­Ø© '+num;
document.getElementById('surahMeta').innerHTML='';
document.getElementById('bismillah').style.display='none';
document.getElementById('ayahContainer').innerHTML='<div class="loading"><div class="spinner"></div><span>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></div>';
try{
const res=await fetch(`https://api.alquran.cloud/v1/page/${num}/quran-uthmani`);
const data=await res.json();
if(data.code===200){curAyahs=data.data.ayahs;let h='',ls=0;
curAyahs.forEach(a=>{if(a.surah.number!==ls){ls=a.surah.number;h+=`<div class="surah-header" style="margin:14px 0"><div class="surah-name" style="font-size:20px">Ø³ÙˆØ±Ø© ${a.surah.name}</div></div>`}
h+=`<span class="ayah-text">${a.text}</span><span class="ayah-num">${a.numberInSurah}</span> `});
document.getElementById('ayahContainer').innerHTML=h}
}catch(e){document.getElementById('ayahContainer').innerHTML='<div class="loading"><span style="color:#DC3545">âŒ Ø®Ø·Ø£</span></div>'}
}

// â•â•â• AUDIO â•â•â•
function getAudioUrl(sNum,aNum){const r=document.getElementById('reciterSelect').value;return`https://everyayah.com/data/${r}/${String(sNum).padStart(3,'0')}${String(aNum).padStart(3,'0')}.mp3`}
function ayahAction(num){selAyNum=num;playIdx=curAyahs.findIndex(a=>a.numberInSurah===num);if(playIdx>=0)playCurAyah()}
function playCurAyah(){if(playIdx<0||playIdx>=curAyahs.length)return;const a=curAyahs[playIdx];const sn=curSurah?curSurah.n:1;
audioEl.src=getAudioUrl(sn,a.numberInSurah);audioEl.play().catch(e=>console.log(e));isPlaying=true;updatePlayBtn();highlightAyah(a.numberInSurah);
document.getElementById('plSurahName').textContent=curSurah?'Ø³ÙˆØ±Ø© '+curSurah.a:'Ø§Ù„Ù‚Ø±Ø¢Ù†';document.getElementById('plAyahNum').textContent='Ø§Ù„Ø¢ÙŠØ© '+a.numberInSurah}
function togglePlayPause(){if(!audioEl.src){if(curAyahs.length){playIdx=0;playCurAyah()}return}if(isPlaying){audioEl.pause();isPlaying=false}else{audioEl.play().catch(e=>{});isPlaying=true}updatePlayBtn()}
function stopAudio(){audioEl.pause();audioEl.src='';isPlaying=false;playIdx=0;updatePlayBtn();clearHighlights();
document.getElementById('progressFill').style.width='0%';document.getElementById('currentTime').textContent='0:00';document.getElementById('durationTime').textContent='0:00'}
function nextAyahAudio(){if(playIdx<curAyahs.length-1){playIdx++;playCurAyah()}}
function prevAyahAudio(){if(playIdx>0){playIdx--;playCurAyah()}}
function onAudioEnded(){if(isRepeat){audioEl.currentTime=0;audioEl.play();return}if(playIdx<curAyahs.length-1){playIdx++;playCurAyah()}else{isPlaying=false;updatePlayBtn()}}
function toggleRepeat(){isRepeat=!isRepeat;const b=document.getElementById('repeatBtn');b.style.background=isRepeat?'var(--g5)':'';b.style.color=isRepeat?'var(--p1)':''}
function updateProgress(){if(audioEl.duration){document.getElementById('progressFill').style.width=(audioEl.currentTime/audioEl.duration*100)+'%';document.getElementById('currentTime').textContent=formatTime(audioEl.currentTime)}}
function seekAudio(e){if(!audioEl.duration)return;const b=e.currentTarget.getBoundingClientRect();audioEl.currentTime=(e.clientX-b.left)/b.width*audioEl.duration}
function updatePlayBtn(){document.getElementById('playPauseBtn').textContent=isPlaying?'â¸':'â–¶'}
function highlightAyah(num){clearHighlights();const el=document.getElementById('ay-'+num);if(el){el.classList.add('playing');el.scrollIntoView({behavior:'smooth',block:'center'})}
document.querySelectorAll('.trans-verse').forEach(e=>e.classList.remove('hl'));const tr=document.getElementById('tr-'+num);if(tr){tr.classList.add('hl');tr.scrollIntoView({behavior:'smooth',block:'center'})}}
function clearHighlights(){document.querySelectorAll('.ayah-text.playing').forEach(e=>e.classList.remove('playing'))}
function formatTime(s){if(!s||isNaN(s))return'0:00';const m=Math.floor(s/60),sc=Math.floor(s%60);return m+':'+(sc<10?'0':'')+sc}

// â•â•â• SEARCH â•â•â•
let searchTimer;
function doSearch(){
clearTimeout(searchTimer);
const q=document.getElementById('searchInput').value.trim();
if(q.length<2){document.getElementById('searchResults').innerHTML='';return}
let h='';SURAHS.filter(s=>s.a.includes(q)||String(s.n)===q).forEach(s=>{
h+=`<div class="surah-item" onclick="loadSurah(${s.n})"><div class="s-num"><span>${s.n}</span></div><div><div class="s-name">Ø³ÙˆØ±Ø© ${s.a}</div></div></div>`;});
searchTimer=setTimeout(async()=>{
try{const res=await fetch(`https://api.alquran.cloud/v1/search/${encodeURIComponent(q)}/all/quran-uthmani`);
const data=await res.json();
if(data.code===200&&data.data.matches){data.data.matches.slice(0,20).forEach(m=>{
h+=`<div class="surah-item" onclick="loadSurah(${m.surah.number})" style="flex-direction:column;align-items:stretch;gap:4px">
<div style="font-size:12px;font-weight:600">Ø³ÙˆØ±Ø© ${m.surah.name} [${m.numberInSurah}]</div>
<div style="font-family:var(--fq);font-size:15px;line-height:2">${m.text}</div></div>`})}
document.getElementById('searchResults').innerHTML=h||'<p style="padding:20px;text-align:center;color:var(--tx3)">Ù„Ø§ Ù†ØªØ§Ø¦Ø¬</p>'}catch(e){}},500);
document.getElementById('searchResults').innerHTML=h;
}

// â•â•â• CANVAS & VIDEO â•â•â•
let canvas,ctx;
function initCanvas(){
canvas=document.getElementById('previewCanvas');
ctx=canvas.getContext('2d');
canvas.width=1080;canvas.height=1920;
updatePreview();
}

function updatePreview(){
if(!ctx)return;
const bg=document.getElementById('vmBg').value;
const textColor=document.getElementById('vmTextColor').value;
const fs=parseInt(document.getElementById('vmFontSize').value)||28;
// Draw background
const gradients={
'gradient-dark':['#0a0a0a','#1a1a2e','#0a0a0a'],
'gradient-green':['#0a2a1a','#1B4332','#0a2a1a'],
'gradient-gold':['#1a1000','#3a2a00','#1a1000'],
'gradient-blue':['#0a1628','#1a3050','#0a1628'],
'gradient-purple':['#1a0a2a','#2a1a4a','#1a0a2a'],
'solid-black':['#000','#000','#000'],
'solid-dark':['#111','#111','#111'],
'pattern-islamic':['#0a2a1a','#1B4332','#0a2a1a']
};
const colors=gradients[bg]||gradients['gradient-dark'];
const grd=ctx.createLinearGradient(0,0,0,canvas.height);
grd.addColorStop(0,colors[0]);grd.addColorStop(0.5,colors[1]);grd.addColorStop(1,colors[2]);
ctx.fillStyle=grd;ctx.fillRect(0,0,canvas.width,canvas.height);
// Draw decorative border
ctx.strokeStyle='rgba(218,165,32,0.3)';ctx.lineWidth=2;
ctx.strokeRect(40,40,canvas.width-80,canvas.height-80);
ctx.strokeRect(50,50,canvas.width-100,canvas.height-100);
// Draw text
ctx.fillStyle=textColor;ctx.textAlign='center';ctx.textBaseline='middle';
ctx.font=`${fs}px "Amiri Quran", "Amiri", serif`;
const ayahText=document.getElementById('previewAyah').textContent||'ï´¿ Ø¨ÙØ³Û¡Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù ï´¾';
wrapText(ctx,ayahText,canvas.width/2,canvas.height/2,canvas.width-120,fs*2);
// Reference
ctx.font='24px "Cairo", sans-serif';ctx.fillStyle='rgba(255,255,255,0.6)';
ctx.fillText(document.getElementById('previewRef').textContent||'',canvas.width/2,canvas.height-120);
}

function wrapText(ctx,text,x,y,maxW,lineH){
const words=text.split(' ');let line='';let lines=[];
words.forEach(w=>{const test=line+w+' ';if(ctx.measureText(test).width>maxW&&line){lines.push(line.trim());line=w+' '}else line=test});
if(line)lines.push(line.trim());
const startY=y-(lines.length-1)*lineH/2;
lines.forEach((l,i)=>ctx.fillText(l,x,startY+i*lineH));
}

function generateVideo(){
showToast('ğŸ¬ Ø¬Ø§Ø±Ù Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ... Ù‡Ø°Ø§ Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆÙ‚Øª');
if(!canvas)initCanvas();
try{
const stream=canvas.captureStream(30);
const recorder=new MediaRecorder(stream,{mimeType:'video/webm;codecs=vp9'});
const chunks=[];
recorder.ondataavailable=e=>{if(e.data.size>0)chunks.push(e.data)};
recorder.onstop=()=>{
const blob=new Blob(chunks,{type:'video/webm'});
const url=URL.createObjectURL(blob);
const a=document.createElement('a');a.href=url;
a.download=`quran_video_${Date.now()}.webm`;a.click();
URL.revokeObjectURL(url);
showToast('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­!');
};
// Animate for 10 seconds
recorder.start();
let frame=0;const totalFrames=300;
const animate=()=>{
if(frame>=totalFrames){recorder.stop();return}
updatePreview();frame++;requestAnimationFrame(animate);
};
animate();
}catch(e){showToast('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: '+e.message)}
}

function captureFrame(){
if(!canvas)initCanvas();
updatePreview();
canvas.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement('a');a.href=url;
a.download=`quran_image_${Date.now()}.png`;a.click();
URL.revokeObjectURL(url);
showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©');
},'image/png');
}

function loadBgImage(){
const file=document.getElementById('vmBgImage').files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=e=>{
const img=new Image();
img.onload=()=>{
if(!ctx)initCanvas();
ctx.drawImage(img,0,0,canvas.width,canvas.height);
showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ù„ÙÙŠØ©');
};
img.src=e.target.result;
};
reader.readAsDataURL(file);
}

// â•â•â• AI IMAGE GENERATION â•â•â•
function generateAI(){
const style=document.getElementById('aiStyle').value;
const colors=document.getElementById('aiColors').value;
const ratio=document.getElementById('aiRatio').value;
const count=parseInt(document.getElementById('aiCount').value);
const type=document.getElementById('aiType').value;
showToast('ğŸ¨ Ø¬Ø§Ø±Ù ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±...');
const grid=document.getElementById('aiGrid');
const results=document.getElementById('aiResults');
results.style.display='block';
grid.innerHTML='';
const [rw,rh]=ratio.split(':').map(Number);
const w=rw*100;const h=rh*100;
for(let i=0;i<count;i++){
const c=document.createElement('canvas');
c.width=w;c.height=h;
const cx=c.getContext('2d');
generateAIImage(cx,w,h,style,colors,i);
const div=document.createElement('div');
div.className='ai-img';
div.style.aspectRatio=ratio.replace(':','/');
const img=document.createElement('img');
img.src=c.toDataURL('image/png');
const dl=document.createElement('button');
dl.className='ai-dl';dl.textContent='ğŸ“¥ ØªØ­Ù…ÙŠÙ„';
dl.onclick=()=>{const a=document.createElement('a');a.href=img.src;a.download=`ai_bg_${i+1}.png`;a.click()};
div.appendChild(img);div.appendChild(dl);grid.appendChild(div);
}
showToast(`âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ ${count} ØµÙˆØ±`);
}

function generateAIImage(cx,w,h,style,colors,seed){
const palettes={
'green-gold':['#1B4332','#2D6A4F','#40916C','#DAA520','#F0C850'],
'blue-white':['#0a1628','#1a3050','#2a5080','#ffffff','#87CEEB'],
'dark':['#0a0a0a','#1a1a2e','#16213e','#533483','#2c3e50'],
'warm':['#2d1810','#5a2a1a','#8B4513','#DAA520','#FF6347'],
'cool':['#0a1628','#1a3050','#4682B4','#87CEEB','#E0E0E0']
};
const pal=palettes[colors]||palettes['green-gold'];
// Background gradient
const grd=cx.createLinearGradient(0,0,w,h);
grd.addColorStop(0,pal[0]);grd.addColorStop(0.5,pal[1]);grd.addColorStop(1,pal[2]);
cx.fillStyle=grd;cx.fillRect(0,0,w,h);
// Patterns based on style
const rng=(s)=>{s=s*9301+49297;return(s%233280)/233280};
if(style==='islamic-art'||style==='geometric'){
cx.strokeStyle=pal[3]+'40';cx.lineWidth=1;
for(let i=0;i<20;i++){
const x=rng(seed*100+i)*w;const y=rng(seed*200+i)*h;const r=20+rng(seed*300+i)*60;
cx.beginPath();
for(let j=0;j<8;j++){const angle=j*Math.PI/4;cx.moveTo(x,y);cx.lineTo(x+Math.cos(angle)*r,y+Math.sin(angle)*r)}
cx.stroke();
}
}else if(style==='mosque'){
cx.fillStyle=pal[3]+'30';
cx.beginPath();cx.arc(w/2,h*0.6,w*0.3,Math.PI,0);cx.fill();
cx.fillRect(w/2-10,h*0.3,20,h*0.3);
cx.beginPath();cx.arc(w/2,h*0.3,15,0,Math.PI*2);cx.fill();
}else if(style==='nature'){
for(let i=0;i<50;i++){cx.fillStyle=pal[3]+'15';cx.beginPath();cx.arc(rng(seed*100+i)*w,rng(seed*200+i)*h,rng(seed*300+i)*30+5,0,Math.PI*2);cx.fill()}
}else if(style==='space'){
for(let i=0;i<100;i++){cx.fillStyle=`rgba(255,255,255,${rng(seed*400+i)*0.8})`;cx.beginPath();cx.arc(rng(seed*100+i)*w,rng(seed*200+i)*h,rng(seed*300+i)*2+0.5,0,Math.PI*2);cx.fill()}
}else{
for(let i=0;i<30;i++){cx.fillStyle=pal[Math.floor(rng(seed*500+i)*pal.length)]+'20';cx.beginPath();cx.arc(rng(seed*100+i)*w,rng(seed*200+i)*h,rng(seed*300+i)*50+10,0,Math.PI*2);cx.fill()}
}
// Border
cx.strokeStyle=pal[3]+'50';cx.lineWidth=2;cx.strokeRect(15,15,w-30,h-30);
}

function downloadAllAI(){
document.querySelectorAll('.ai-img img').forEach((img,i)=>{
const a=document.createElement('a');a.href=img.src;a.download=`ai_bg_${i+1}.png`;a.click();
});
showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ±');
}

function useAsBackground(){
const imgs=document.querySelectorAll('.ai-img img');
if(imgs.length>0){
const img=new Image();
img.onload=()=>{
if(!ctx)initCanvas();
ctx.drawImage(img,0,0,canvas.width,canvas.height);
switchSection('video',document.querySelectorAll('.nav-tab')[1]);
showToast('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
};
img.src=imgs[0].src;
}
}

// â•â•â• VIDEO EDITOR â•â•â•
function loadEditorVideo(){
const file=document.getElementById('editorVideoFile').files[0];
if(!file)return;
const video=document.getElementById('editorVideo');
video.src=URL.createObjectURL(file);
showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
}

function mergeAudioVideo(){showToast('ğŸ”€ Ø¬Ø§Ø±Ù Ø¯Ù…Ø¬ Ø§Ù„ØµÙˆØª... ÙŠØªØ·Ù„Ø¨ Ù…Ø¹Ø§Ù„Ø¬Ø©')}
function removeAudio(){const v=document.getElementById('editorVideo');v.muted=true;showToast('ğŸ”‡ ØªÙ… ÙƒØªÙ… Ø§Ù„ØµÙˆØª')}
function trimVideo(){showToast('âœ‚ï¸ Ø£Ø¯Ø§Ø© Ø§Ù„Ù‚Øµ - Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ')}

// â•â•â• LIVE / RECORDING â•â•â•
let liveStream=null;
async function startLive(){
try{
const source=document.getElementById('liveSource').value;
const quality=document.getElementById('liveQuality').value;
const constraints={video:{width:{ideal:source==='camera'?1920:3840},height:{ideal:source==='camera'?1080:2160}},audio:true};
if(source==='camera'){liveStream=await navigator.mediaDevices.getUserMedia(constraints)}
else{liveStream=await navigator.mediaDevices.getDisplayMedia({video:true,audio:true})}
document.getElementById('liveVideo').srcObject=liveStream;
document.getElementById('liveIndicator').style.display='block';
document.getElementById('liveStartBtn').style.display='none';
document.getElementById('liveStopBtn').style.display='';
// Start recording
mediaRecorder=new MediaRecorder(liveStream,{mimeType:'video/webm'});
recordedChunks=[];
mediaRecorder.ondataavailable=e=>{if(e.data.size>0)recordedChunks.push(e.data)};
mediaRecorder.onstop=()=>{
const blob=new Blob(recordedChunks,{type:'video/webm'});
const url=URL.createObjectURL(blob);
const a=document.createElement('a');a.href=url;a.download=`recording_${Date.now()}.webm`;a.click();
showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„');
};
mediaRecorder.start(1000);
showToast('ğŸ”´ Ø¬Ø§Ø±Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„...');
}catch(e){showToast('âŒ Ø®Ø·Ø£: '+e.message)}
}

function stopLive(){
if(mediaRecorder&&mediaRecorder.state!=='inactive')mediaRecorder.stop();
if(liveStream)liveStream.getTracks().forEach(t=>t.stop());
document.getElementById('liveVideo').srcObject=null;
document.getElementById('liveIndicator').style.display='none';
document.getElementById('liveStartBtn').style.display='';
document.getElementById('liveStopBtn').style.display='none';
}

function takePhoto(){
const video=document.getElementById('liveVideo');
if(!video.srcObject){showToast('âŒ Ø´ØºÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø£ÙˆÙ„Ø§Ù‹');return}
const c=document.createElement('canvas');c.width=video.videoWidth;c.height=video.videoHeight;
c.getContext('2d').drawImage(video,0,0);
c.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement('a');a.href=url;a.download=`photo_${Date.now()}.png`;a.click();
showToast('ğŸ“¸ ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©');
},'image/png');
}

// â•â•â• EXPORT â•â•â•
function togglePlatform(el){el.classList.toggle('sel');
const p=el.dataset.platform;
if(el.classList.contains('sel'))selectedPlatforms.push(p);
else selectedPlatforms=selectedPlatforms.filter(x=>x!==p);
// Update preview aspect ratio
if(selectedPlatforms.length>0){
const specs=PLATFORMS[selectedPlatforms[selectedPlatforms.length-1]];
const pc=document.getElementById('previewContainer');
if(specs.r==='16:9')pc.style.aspectRatio='16/9';
else if(specs.r==='1:1')pc.style.aspectRatio='1/1';
else pc.style.aspectRatio='9/16';
}
}

function selectAllExports(){document.querySelectorAll('#exportGrid input[type=checkbox]').forEach(c=>c.checked=true)}
function deselectAllExports(){document.querySelectorAll('#exportGrid input[type=checkbox]').forEach(c=>c.checked=false)}

function exportAll(){
const selected=[];
document.querySelectorAll('#exportGrid input[type=checkbox]:checked').forEach(c=>selected.push(c.value));
if(selected.length===0){showToast('âš ï¸ Ø§Ø®ØªØ± ØµÙŠØºØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');return}
const progress=document.getElementById('exportProgress');
progress.classList.add('show');
let done=0;
selected.forEach((fmt,i)=>{
setTimeout(()=>{
done++;
const pct=Math.round(done/selected.length*100);
document.getElementById('epFill').style.width=pct+'%';
document.getElementById('epText').textContent=`ØªØµØ¯ÙŠØ± ${fmt}... (${done}/${selected.length}) - ${pct}%`;
if(done===selected.length){
setTimeout(()=>{
if(canvas){canvas.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement('a');
a.href=url;a.download=`quran_export_${fmt}_${Date.now()}.png`;a.click();
},'image/png');}
showToast(`âœ… ØªÙ… ØªØµØ¯ÙŠØ± ${selected.length} Ù…Ù„Ù`);
progress.classList.remove('show');
},500);
}
},i*1000);
});
}

function exportSelected(){
const first=document.querySelector('#exportGrid input[type=checkbox]:checked');
if(!first){showToast('âš ï¸ Ø§Ø®ØªØ± ØµÙŠØºØ©');return}
showToast('ğŸ“¤ Ø¬Ø§Ø±Ù Ø§Ù„ØªØµØ¯ÙŠØ±: '+first.value);
if(canvas){canvas.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement('a');a.href=url;a.download=`quran_${first.value}_${Date.now()}.png`;a.click();
showToast('âœ… ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ±');
},'image/png');}
}

// â•â•â• UI HELPERS â•â•â•
function switchSection(id,btn){
document.querySelectorAll('.section').forEach(s=>s.classList.remove('act'));
document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('act'));
document.getElementById('sec-'+id).classList.add('act');
if(btn)btn.classList.add('act');
}

function switchSbTab(id,btn){
document.querySelectorAll('.sb-panel').forEach(p=>p.classList.remove('act'));
document.querySelectorAll('.sb-tab').forEach(t=>t.classList.remove('act'));
document.getElementById('sbp-'+id).classList.add('act');
if(btn)btn.classList.add('act');
}

function navSurah(d){if(!curSurah)return;const n=curSurah.n+d;if(n>=1&&n<=114)loadSurah(n)}
function chgFont(d){fontSize=Math.max(16,Math.min(48,fontSize+d));document.documentElement.style.setProperty('--qs',fontSize+'px');document.getElementById('fontLbl').textContent=fontSize;localStorage.setItem('fs',fontSize)}
function toggleTheme(){const c=document.documentElement.getAttribute('data-t');applyTheme(c==='dark'?'light':'dark')}
function applyTheme(t){if(t==='dark')document.documentElement.setAttribute('data-t','dark');else document.documentElement.removeAttribute('data-t');localStorage.setItem('thm',t)}
function toggleLP(){document.getElementById('qSidebar').style.display=document.getElementById('qSidebar').style.display==='none'?'':'none'}
function vmLoadSurah(){const n=document.getElementById('vmSurah').value;if(n){const s=SURAHS.find(x=>x.n==n);if(s){document.getElementById('vmToAyah').value=s.c;document.getElementById('previewRef').textContent='Ø³ÙˆØ±Ø© '+s.a}}}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000)}

})();
</script>
</body>
</html>